(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},79469,e=>{"use strict";var t=e.i(81949);let r=async(e,r,s,a=1,l)=>(await t.default.post(`https://api.ganpatirudraakshaam.com/api/customer/${e}/cart`,{productId:r,variantId:s,quantity:a,priceAtTime:l},{withCredentials:!0})).data,s=async(e,r,s)=>(await t.default.delete(`https://api.ganpatirudraakshaam.com/api/customer/${e}/cart`,{data:{productId:r,variantId:s},withCredentials:!0})).data;e.s(["addToCartApi",0,r,"removeFromCartApi",0,s])},90965,e=>{"use strict";var t=e.i(81949);let r=async(e,r)=>(await t.default.post(`https://api.ganpatirudraakshaam.com/api/customer/${e}/wishlist`,{productId:r},{withCredentials:!0})).data;e.s(["removeWishlistApi",0,(e,r)=>t.default.delete(`https://api.ganpatirudraakshaam.com/api/customer/remove-wishlist/${e}/${r}`,{withCredentials:!0}),"toggleWishlistApi",0,r])},93280,e=>{"use strict";var t=e.i(43476),r=e.i(79469),s=e.i(90965),a=e.i(19158),l=e.i(57688),i=e.i(22016),d=e.i(18566),n=e.i(71645),o=e.i(5766),c=e.i(10656),m=e.i(84828);e.s(["default",0,()=>{let{customer:e,refreshCustomer:u}=(0,a.useCustomer)(),x=e?._id,[h,p]=(0,n.useState)(!1),f=(0,d.useRouter)(),g=async e=>{if(x&&!h){p(!0);try{await (0,s.removeWishlistApi)(x,e.product._id),await u(),o.toast.success("Removed from wishlist")}catch(e){console.log(e),o.toast.error("Failed to remove from wishlist")}finally{p(!1)}}},b=async e=>{if(x&&!h){p(!0);try{await (0,r.addToCartApi)(x,e.product._id,void 0,1,e.product.price),await (0,s.removeWishlistApi)(x,e.product._id),await u(),o.toast.success("Moved to cart"),f.push("/my-cart")}catch(e){console.log(e),o.toast.error("Failed to move to cart")}finally{p(!1)}}};return(0,t.jsxs)("div",{className:"flex flex-col gap-6 px-4 lg:px-8 h-[calc(100vh-100px)] overflow-y-auto no-scrollbar",children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-define-red",children:["Wishlist (",e?.wishlist?.length||0,")"]}),(0,t.jsx)("div",{children:e?.wishlist?.length===0?(0,t.jsx)("p",{className:"text-gray-500 text-center",children:"Your wishlist is empty."}):(0,t.jsx)("div",{className:"flex flex-col gap-4",children:e?.wishlist?.map(e=>(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2 rounded border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(l.default,{src:e.product.coverImage?.url,alt:e.product.coverImage?.public_id,width:200,height:200,className:"aspect-square rounded object-cover"})}),(0,t.jsxs)("div",{className:"flex flex-col justify-between w-full gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-base sm:text-lg md:text-xl font-medium text-gray-800 leading-snug",children:e.product.name}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:e.product.variables?.map(e=>e.name).join(", ")}),e.product.price&&(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-base sm:text-lg md:text-xl font-semibold text-define-red",children:[(0,t.jsx)(m.FaIndianRupeeSign,{className:"inline"}),e.product.price.toFixed(0)]}),(0,t.jsxs)("span",{className:"line-through text-gray-500 text-xs sm:text-sm",children:[(0,t.jsx)(m.FaIndianRupeeSign,{className:"inline"}),e.product.mrp.toFixed(0)]}),(0,t.jsxs)("span",{className:"text-xs text-define-brown font-medium",children:[e.product.discount,"% OFF"]})]})]}),(0,t.jsxs)("button",{className:"   mt-3 sm:mt-auto flex items-center justify-center gap-2   text-white font-semibold   text-xs sm:text-sm md:text-[15px]   px-3 py-1.5 sm:px-4 sm:py-2 md:px-5   rounded-full   btn-grad hover:scale-[1.03]   active:scale-95   w-full sm:w-fit   ",onClick:()=>b(e),children:[(0,t.jsx)(c.CgShoppingCart,{size:14,className:"sm:size-[16px]"}),(0,t.jsx)("span",{className:"whitespace-nowrap",children:"Add to Cart"})]})]}),(0,t.jsxs)("div",{className:"flex flex-row lg:flex-col items-center lg:items-end gap-2 justify-between lg:justify-center",children:[(0,t.jsx)(i.default,{href:`/product/${e.product.slug}`,className:" w-full inline-flex items-center justify-center   bg-gray-100   border border-gray-200   transition-all duration-300   hover:bg-gray-200 hover:border-gray-300 text-nowrap px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-medium text-define-brown   ",children:"View Item"}),(0,t.jsx)("button",{onClick:()=>g(e),className:"w-full inline-flex items-center justify-center bg-define-red/10  text-define-red text-xs sm:text-sm font-medium px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all duration-300 hover:bg-define-red/20 hover:text-define-red/90",children:"Delete"})]})]},e._id))})})]})}])},65586,e=>{"use strict";var t=e.i(43476);e.i(62443);var r=e.i(19158),s=e.i(46124),a=e.i(18566),l=e.i(71645),i=e.i(5766);function d(){let e=(0,a.useRouter)(),[d,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),{customer:p,loading:f,logoutCustomer:g,clearCustomer:b,refreshCustomer:y}=(0,r.useCustomer)(),[j,v]=(0,l.useState)(p?.gender||"male"),[w,N]=(0,l.useState)(p?.name||""),[k,C]=(0,l.useState)(p?.email||""),[I,S]=(0,l.useState)(p?.mobile||""),_=e=>`border px-4 py-3 text-sm rounded-sm outline-none
     ${e?"border-gray-300 bg-white focus:border-[#2874F0]":"border-gray-200 bg-gray-50 cursor-not-allowed"}`,O=e=>{p&&("personal"===e&&(N(p.name||""),v(p.gender||"male"),n(!1)),"email"===e&&(C(p.email||""),c(!1)),"mobile"===e&&(S(p.mobile||""),u(!1)))},$=async(e,t)=>{if(!p?._id||!t.trim()){console.log(p?._id,t),console.warn("Invalid update attempt:",{key:e,value:t});return}"mobile"!==e||t.startsWith("91")||(t="91"+t);try{let r=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${p._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({[e]:t})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.message||"Update failed")}let s=await r.json();return i.default.success("Update successful"),s.data}catch(e){throw i.default.error(e.message||"Update failed"),e}};(0,l.useEffect)(()=>{!f&&p&&(v(p?.gender||"male"),N(p.name||""),C(p.email||""),S(p.mobile||""),h(!0))},[p,f]),(0,l.useEffect)(()=>{p&&j!==p.gender&&$("gender",j).catch(e=>{console.error("Failed to update gender:",e)})},[j]);let A=async()=>{await $("name",w),await y(),n(!1)},T=async()=>{await $("email",k),await y(),c(!1)},E=async()=>{let t=I;if(!t.trim())return void i.default.error("Mobile number cannot be empty");if(t.length<10)return void i.default.error("Enter valid mobile number");if(t.startsWith("91")||(t="91"+t),t===p?.mobile)return void i.default.error("Already your current number");let r=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/check-mobile?mobile=${t}`,{credentials:"include"});(await r.json()).exists?i.default.error("Mobile already registered with another account"):(i.default.success("OTP verification required"),e.push(`/login?mode=update-mobile&mobile=${t}`))};return f||!x?(0,t.jsx)("div",{className:"bg-white rounded-md p-6 md:p-8 md:pb-30 relative overflow-hidden",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-10 bg-gray-100 rounded"}),(0,t.jsx)("div",{className:"h-10 bg-gray-100 rounded"}),(0,t.jsx)("div",{className:"h-10 bg-gray-100 rounded"})]})}):(0,t.jsxs)("div",{className:"bg-white lg:px-8 lg:py-0 p-8 ",children:[(0,t.jsxs)("section",{className:"mb-14",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),(0,t.jsx)("button",{onClick:()=>d?O("personal"):n(!0),className:"text-sm font-bold text-define-brown",children:d?"Cancel":"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-6 mb-6",children:[(0,t.jsx)("div",{className:"flex gap-6",children:(0,t.jsx)("input",{placeholder:"Full Name",disabled:!d,value:w,onKeyDown:s.blockNumbersInText,onChange:e=>N(e.target.value),className:`${_(d)} w-[260px]`})}),d&&(0,t.jsx)("button",{onClick:A,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-800 mb-4",children:"Your Gender"}),(0,t.jsx)("div",{className:"flex gap-10 text-sm text-gray-900",children:["male","female"].map(e=>(0,t.jsxs)("label",{className:`flex items-center gap-3 ${!d&&"opacity-60"}`,children:[(0,t.jsx)("input",{type:"radio",disabled:!d,checked:j===e,onChange:()=>v(e)}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})]}),(0,t.jsxs)("section",{className:"mb-14",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Address"}),(0,t.jsx)("button",{onClick:()=>o?O("email"):c(!0),className:"text-sm font-bold text-define-brown",children:o?"Cancel":"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("input",{placeholder:"Email Address",disabled:!o,value:k,onChange:e=>C(e.target.value),className:`${_(o)} w-[280px]`}),o&&(0,t.jsx)("button",{onClick:T,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Mobile Number"}),(0,t.jsx)("button",{onClick:()=>m?O("mobile"):u(!0),className:"text-sm font-bold text-define-brown",children:m?"Cancel":"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("input",{type:"tel",maxLength:10,placeholder:"Mobile No",disabled:!m,value:I,onChange:e=>S(e.target.value),onKeyDown:s.allowOnlyNumbers,className:`${_(m)} w-[260px]`}),m&&(0,t.jsx)("button",{onClick:E,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]})]})]})}e.s(["default",()=>d])},46124,e=>{"use strict";e.s(["allowOnlyNumbers",0,e=>{let t=e.key;"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&(/^[0-9]$/.test(t)||e.preventDefault())},"blockNumbersInText",0,e=>{let t=e.key;"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&/^[0-9]$/.test(t)&&e.preventDefault()}])},34342,e=>{"use strict";var t=e.i(43476),r=e.i(46124);e.s(["default",0,function({form:e,onChange:s}){let a=(t,r)=>s({...e,[t]:r});async function l(t){if(6===t.length)try{let r=await fetch(`https://api.ganpatirudraakshaam.com/api/pickup/location/${t}`);if(!r.ok)return;let a=await r.json(),l=a?.PostOffice||(Array.isArray(a)?a[0]?.PostOffice:null);l?.length>0&&s({...e,pin:t,city:l[0]?.District||"",state:l[0]?.State||""})}catch(e){console.error("Error fetching pin code details:",e)}}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700",children:[(0,t.jsx)("input",{placeholder:"Name",value:e.name,onChange:e=>a("name",e.target.value),onKeyDown:r.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"tel",placeholder:"Mobile Number",value:e.mobile,maxLength:10,onKeyDown:r.allowOnlyNumbers,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&!(t.length>10)&&a("mobile",t)},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),e.mobile&&e.mobile.length<10&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 10 digits"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"tel",placeholder:"Pin Code",value:e.pin,maxLength:6,onKeyDown:r.allowOnlyNumbers,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&!(t.length>6)&&(a("pin",t),6===t.length&&l(t))},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),e.pin&&e.pin.length<6&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 6 digits"})]}),(0,t.jsx)("input",{placeholder:"Area",value:e.area,onChange:e=>a("area",e.target.value),onKeyDown:r.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,t.jsx)("input",{placeholder:"City",value:e.city,onChange:e=>a("city",e.target.value),onKeyDown:r.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,t.jsx)("input",{placeholder:"State",value:e.state,onChange:e=>a("state",e.target.value),onKeyDown:r.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,t.jsx)("input",{placeholder:"Landmark",value:e.landmark||"",onChange:e=>a("landmark",e.target.value),onKeyDown:r.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"tel",placeholder:"Alternative Phone",value:e.alternateMobile||"",maxLength:10,onKeyDown:r.allowOnlyNumbers,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&!(t.length>10)&&a("alternateMobile",t)},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),e.alternateMobile&&e.alternateMobile.length>0&&e.alternateMobile.length<10&&(0,t.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 10 digits"})]})]}),(0,t.jsx)("div",{className:"mt-4 flex gap-6 text-sm text-defined-green",children:["Home","Office","Others"].map(r=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",checked:e.type===r,onChange:()=>a("type",r)}),r]},r))})]})}])},84662,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(19158),s=e.i(71645),a=e.i(5766),l=e.i(33401),i=e.i(90106),d=e.i(34342),n=e.i(932);function o(e){let r,a,l,i,d,o,m,u=(0,n.c)(16),{open:x,text:h,id:p,onConfirm:f,onCancel:g}=e,b=void 0===h?"Are you sure?":h;return(u[0]!==x?(r=()=>(x?document.body.style.overflow="hidden":document.body.style.overflow="auto",c),a=[x],u[0]=x,u[1]=r,u[2]=a):(r=u[1],a=u[2]),(0,s.useEffect)(r,a),x)?(u[3]!==b?(l=(0,t.jsx)("p",{className:"text-gray-800 text-sm mb-6",children:b}),u[3]=b,u[4]=l):l=u[4],u[5]!==g?(i=(0,t.jsx)("button",{onClick:g,className:"px-4 py-2 text-sm border rounded-md",children:"Cancel"}),u[5]=g,u[6]=i):i=u[6],u[7]!==p||u[8]!==f?(d=(0,t.jsx)("button",{onClick:()=>f(p),className:"px-4 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"}),u[7]=p,u[8]=f,u[9]=d):d=u[9],u[10]!==i||u[11]!==d?(o=(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[i,d]}),u[10]=i,u[11]=d,u[12]=o):o=u[12],u[13]!==l||u[14]!==o?(m=(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-white w-[90%] max-w-sm rounded-lg p-6 shadow-xl animate-fadeIn",children:[l,o]})}),u[13]=l,u[14]=o,u[15]=m):m=u[15],m):null}function c(){document.body.style.overflow="auto"}let m={name:"",mobile:"",alternateMobile:"",pin:"",area:"",city:"",state:"",landmark:"",type:"Home"};function u(){let{customer:e}=(0,r.useCustomer)(),[n,c]=(0,s.useState)(!1),[u,x]=(0,s.useState)(),[h,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(null),b=(0,s.useRef)(!1);(0,s.useEffect)(()=>{e?.addresses&&(b.current||(p(e.addresses),b.current=!0))},[e?._id]);let y=async()=>{if(e?._id&&f){if(!f.name||!f.mobile||!f.pin||!f.area||!f.city||!f.state||!f.landmark)return void a.default.error("Please fill all required fields");try{let t=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${e._id}/address`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)}),r=await t.json();if(!t.ok||!r.address)throw Error();p(e=>[...e,r.address]),a.default.success("Address added"),g(null)}catch{a.default.error("Failed to add address")}}},j=async()=>{if(e?._id&&f?._id){if(!f.name||!f.mobile||!f.pin||!f.area||!f.city||!f.state||!f.landmark)return void a.default.error("Please fill all required fields");if(10!==f.mobile.length)return void a.default.error("Mobile number must be 10 digits");if(f.alternateMobile&&10!==f.alternateMobile.length)return void a.default.error("Alternate mobile number must be 10 digits");if(6!==f.pin.length)return void a.default.error("Pin code must be 6 digits");try{let t=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${e._id}/address/${f._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)}),r=await t.json();if(!t.ok||!r.address)throw Error();p(e=>e.map(e=>e._id===f._id?r.address:e)),a.default.success("Address updated"),g(null)}catch{a.default.error("Failed to update address")}}},v=async t=>{if(e?._id&&t){p(e=>e.filter(e=>e._id!==t));try{if(!(await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${e._id}/address/${t}`,{method:"DELETE",credentials:"include"})).ok)throw Error();a.default.success("Address removed")}catch{p(h),a.default.error("Failed to remove address")}}},w=async e=>{c(!1),e&&await v(e)};return(0,t.jsxs)("div",{className:"bg-white rounded-md px-6 flex flex-col gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("button",{onClick:()=>g({...m}),className:"bg-define-brown text-white px-4 py-2 rounded-md text-sm",children:"+ Add Address"})}),f&&(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 space-y-4 shadow-defined-light",children:[(0,t.jsx)(d.default,{form:f,onChange:g}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:f._id?j:y,className:"bg-define-brown text-white px-5 py-2 rounded-md text-sm",children:f._id?"Update Address":"Save Address"}),(0,t.jsx)("button",{onClick:()=>g(null),className:"border px-5 py-2 rounded-md text-sm",children:"Cancel"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-3",children:h.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 flex justify-between shadow-defined-light",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs bg-define-brown text-white px-2 py-0.5 rounded",children:e.type}),(0,t.jsxs)("p",{className:"font-semibold mt-1",children:[e.name," ",(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["| ",e.mobile]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:[e.area,e.city,e.state,e.pin].filter(Boolean).join(", ")})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(l.BiPencil,{size:16,className:"text-green-600 cursor-pointer",onClick:()=>g(e)}),(0,t.jsx)(i.BsTrash2,{size:16,className:"text-red-500 cursor-pointer",onClick:()=>{x(e._id),c(!0)}})]})]},e._id))}),(0,t.jsx)(o,{open:n,id:u,text:"Are you sure you want to delete this address?",onConfirm:w,onCancel:()=>c(!1)})]})}e.s(["default",()=>u],84662)},30738,e=>{"use strict";var t=e.i(43476),r=e.i(79469),s=e.i(90965),a=e.i(19158),l=e.i(47285),i=e.i(57688),d=e.i(22016),n=e.i(18566),o=e.i(71645),c=e.i(5766),m=e.i(11152);e.s(["default",0,()=>{let e=(0,n.useRouter)(),{customer:u,refreshCustomer:x,loading:h}=(0,a.useCustomer)(),p=u?._id,[f,g]=(0,o.useState)([]),b=(0,o.useRef)(!1),[y,j]=(0,o.useState)(!1);(y||h)&&l.default;let v=e=>{let t=e.productId.stock||0;return 0===t?"out":t<=3?"low":"available"};(0,o.useEffect)(()=>{u?._id&&g(u.cart)},[u?.cart]),(0,o.useEffect)(()=>{b.current&&localStorage.setItem("LOCAL_CART",JSON.stringify(f))},[f]);let w=async(e,t)=>{if(!p||t<1)return;let s=e.productId.stock||0;if(v(e),t>s)return void c.default.error(`Only ${s} products are in stock`);g(r=>r.map(r=>r.productId===e.productId&&r.variantId===e.variantId?{...r,quantity:t}:r));try{await (0,r.addToCartApi)(p,e.productId?._id,e.variantId?._id,t-e.quantity,e.priceAtTime),await x()}catch(e){console.error(e)}},N=async e=>{if(!p)return;j(!0);let t=e.productId._id,s=e.variantId?._id;g(e=>e.filter(e=>e.productId._id!==t||e.variantId?._id!==s));try{await (0,r.removeFromCartApi)(p,t,s),await x()}catch(e){c.default.error("Failed to remove item"),g(u?.cart)}finally{j(!1)}},k=async e=>{if(!p)return;let t=e.productId._id,a=e.variantId?._id;g(e=>e.filter(e=>e.productId._id!==t||e.variantId?._id!==a));try{await (0,s.toggleWishlistApi)(p,t),await (0,r.removeFromCartApi)(p,t,a),c.default.success("Moved to wishlist")}catch(e){c.default.error("Failed to move to wishlist"),g(u?.cart)}},C=f.filter(e=>"out"!==v(e)),I=C.reduce((e,t)=>e+(t.productId.mrp||0)*t.quantity,0),S=C.reduce((e,t)=>{let r=t.productId;return e+(r.mrp||0)*(r.discount||0)/100*t.quantity},0),_=I-S,O=C.reduce((e,t)=>e+t.quantity,0),$=f.length>C.length,A=f.slice().reverse();return(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-center  h-[calc(100vh-100px)] overflow-y-auto no-scrollbar",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 lg:px-2 px-0 self-start basis-full w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-define-red",children:["Cart (",u?.cart?.length||0,")"]}),$&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"⚠️ Some items are out of stock and removed from checkout"})]}),(0,t.jsx)("div",{className:"flex flex-col gap-4 w-full",children:0===A.length?(0,t.jsx)("p",{className:"text-gray-500 text-center w-full",children:"Your cart is empty."}):A.map(e=>{let r=v(e),s=e.productId.stock||0,a="out"===r,l=e.quantity<s,n=e.productId,o=n.price*e.quantity,c=n.mrp*e.quantity;return(0,t.jsxs)("div",{className:`flex flex-col md:flex-row bg-white border rounded-md p-4 gap-4 ${a?"border-red-200 bg-red-50":"border-gray-200"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-center w-full md:w-40",children:[(0,t.jsx)("div",{className:"relative w-full  h-[20rem] md:h-40  bg-gray-100 rounded overflow-hidden",children:(0,t.jsx)(i.default,{src:e.productId.coverImage.url||"",alt:e.productId.name||"",fill:!0,className:"object-cover h-full w-full"})}),(0,t.jsxs)("div",{className:"md:flex hidden items-center mt-3",children:[(0,t.jsx)("button",{onClick:()=>w(e,e.quantity-1),className:"size-[2rem] border  border-gray-200 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:e.quantity<=1||a,children:"−"}),(0,t.jsx)("span",{className:" h-[2rem] w-fit px-4 flex justify-center items-center border text-define-red  border-gray-200 mx-2 min-w-[40px] text-center",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>w(e,e.quantity+1),className:`size-[2rem] border rounded-full disabled:opacity-50 disabled:cursor-not-allowed ${l&&!a?"border-gray-200  hover:bg-gray-100":"border-gray-300 text-gray-400 bg-gray-50"}`,disabled:!l||a,children:"+"})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,t.jsxs)(d.default,{href:`/product/${e.productId.slug}`,children:[(0,t.jsx)("h3",{className:"font-semibold text-[18px] text-define-brown",children:e.productId.name}),(0,t.jsx)("p",{className:"mt-2 text-sm ",children:e.productId.variables?.map(e=>`${e.name}: ${e.values.join(", ")}`).join(" | ")}),(0,t.jsx)("p",{className:"mt-2 text-sm  line-clamp-1",dangerouslySetInnerHTML:{__html:e.productId.shortDescription}}),(0,t.jsxs)("p",{className:"mt-2 font-bold text-define-red text-lg",children:[(0,t.jsx)(m.FaRupeeSign,{className:"inline"}),o.toFixed(0),(0,t.jsxs)("span",{className:"line-through text-gray-400 text-sm ml-3",children:[(0,t.jsx)(m.FaRupeeSign,{className:"inline"}),c.toFixed(0)]}),(0,t.jsxs)("span",{className:"text-define-green text-[13px] ml-2 font-normal",children:[e.productId.discount,"% OFF"]})]}),a?(0,t.jsx)("div",{className:"mt-2 px-3 w-fit py-1 bg-red-100 text-red-700 text-sm rounded-full font-medium",children:"Out of Stock"}):""]}),(0,t.jsxs)("div",{className:"md:flex hidden gap-2 lg:gap-4 lg:justify-evenly items-center lg:justify-start md:pb-1 max-lg:mt-3",children:[(0,t.jsx)("button",{className:`font-bold text-sm lg:text-base  ${a?"text-gray-400 cursor-not-allowed":"hover:text-defined-green "}`,onClick:()=>k(e),disabled:a,children:"MOVE TO WISHLIST"}),(0,t.jsx)("button",{onClick:()=>N(e),className:`font-semibold text-sm lg:text-base  ${a?"text-red-400":" hover:text-red-500"}`,children:"REMOVE"})]}),(0,t.jsxs)("div",{className:"flex md:hidden items-center gap-4 mt-3 w-full",children:[(0,t.jsxs)("div",{className:"flex lg:hidden items-center border border-gray-200 rounded-md overflow-hidden h-[40px]",children:[(0,t.jsx)("button",{onClick:()=>w(e,e.quantity-1),className:"px-2 h-full bg-gray-50  hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:e.quantity<=1||a,children:"−"}),(0,t.jsx)("span",{className:"px-3 h-full flex items-center justify-center text-sm font-semibold  border-x border-gray-200 min-w-[40px]",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>w(e,e.quantity+1),className:`px-2 h-full transition-colors ${l&&!a?"bg-gray-50  hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!l||a,children:"+"})]}),(0,t.jsx)("button",{className:`h-[40px]    text-[13px] font-medium tracking-wide uppercase transition-all duration-200 flex items-center justify-center
      ${a?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-300  hover:border-defined-green hover:text-defined-green hover:bg-green-50"}`,onClick:()=>k(e),disabled:a,children:"MOVE TO WISHLIST"}),(0,t.jsx)("button",{onClick:()=>N(e),className:`h-[40px]   text-[13px]  font-medium tracking-wide uppercase transition-all duration-200 flex items-center justify-center
      ${a?"border-gray-200 text-red-300":"border-gray-300  hover:border-red-500 hover:text-red-600 hover:bg-red-50"}`,children:"Remove"})]})]})]},`${e.productId._id}-${e.variantId?._id??"no-variant"}`)})})]}),(0,t.jsx)("div",{className:"self-start w-full lg:w-[40%]",children:A.length>0&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-4 h-fit sticky top-24",children:[(0,t.jsx)("h3",{className:"font-semibold border-b  border-gray-200 pb-2",children:"PRICE DETAILS"}),(0,t.jsxs)("div",{className:"text-sm space-y-3 mt-3 ",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["Price (",O," available items)"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)(m.FaRupeeSign,{className:"inline"}),I.toFixed(0)]})]}),(0,t.jsxs)("div",{className:"flex justify-between border-b border-gray-200 pb-3",children:[(0,t.jsx)("span",{children:"Discount"}),(0,t.jsxs)("span",{className:"text-define-red",children:["-",(0,t.jsx)(m.FaRupeeSign,{className:"inline"}),S.toFixed(0)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total Amount"}),(0,t.jsxs)("span",{children:[(0,t.jsx)(m.FaRupeeSign,{className:"inline"}),_.toFixed(0)]})]})]}),(0,t.jsx)("button",{onClick:()=>{if(0===C.length)return void c.default.error("No available items in cart");let t=encodeURIComponent(JSON.stringify(C.map(e=>({productId:e.productId._id,variantId:e.variantId?._id,quantity:e.quantity,priceAtTime:e.priceAtTime}))));e.push(`/checkout?mode=cart&items=${t}`)},disabled:0===C.length,className:`mt-6 w-full rounded-full py-2 h-12 text-sm font-semibold transition-all ${0===C.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-grad  hover:scale-[1.03] text-white"}`,children:0===C.length?"No Available Items":`Proceed To Checkout (${O} items)`}),$&&(0,t.jsx)("p",{className:"text-xs text-red-600 mt-2 text-center",children:"Out of stock items excluded from checkout"})]})})]})}])},21599,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),s=e.i(57688),a=e.i(22016),l=e.i(932),i=e.i(11152),d=e.i(10936);function n({open:e,onClose:s,order:a}){var n;let o,c,m,u;if(!e||!a)return null;let x=(n=()=>{s()},m=(0,l.c)(3),u=(0,r.useRef)(null),m[0]!==n?(o=()=>{let e=e=>{u.current&&e.target instanceof Node&&!u.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},c=[n],m[0]=n,m[1]=o,m[2]=c):(o=m[1],c=m[2]),(0,r.useEffect)(o,c),u),h=a.shipping?.trackingHistory||[],p=a.status,f=a.createdAt;a.shipping?.expectedDeliveryDate;let g=(()=>{let e=[],t=[{key:"Processing",title:"Order Processing",desc:"We are processing your order"},{key:"Confirmed",title:"Order Confirmed",desc:"Your order has been confirmed"},{key:"Shipped",title:"Shipped",desc:"Your item has been shipped"},{key:"InTransit",title:"In Transit",desc:"Your item is on the way"},{key:"OutForDelivery",title:"Out for Delivery",desc:"Your item is out for delivery"},{key:"Delivered",title:"Delivered",desc:"Item delivered successfully"}],r=e=>e?new Date(e).toLocaleString("en-IN",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):null,s=t.findIndex(e=>e.key===p),l="Cancelled"===p,i="RTO"===p;l||i||-1===s&&"Processing"===p&&(s=0);for(let a=0;a<t.length;a++){let d=t[a],n=h.find(e=>e.status===d.key||e.status===d.title||e.action===d.key||e.action===d.title),o=n?r(n.timestamp||n.date):null;!o&&("Processing"===d.key&&(o=r(f)),"Confirmed"===d.key&&a<=s&&(o=r(f)));let c=s===a,m=s>a||!!n;m||c||s>=a?e.push({title:d.title,date:o||(c?"In Progress":"Completed"),desc:n?.description||d.desc,active:c,completed:m,status:d.key}):l||i||e.push({title:d.title,date:"Pending",desc:"Pending",active:!1,completed:!1,status:d.key})}return l?e.push({title:"Cancelled",date:r(a.updatedAt),desc:"Order has been cancelled",active:!0,completed:!0,status:"Cancelled",isError:!0}):i&&e.push({title:"RTO (Return to Origin)",date:r(a.updatedAt),desc:"Order is being returned to origin",active:!0,completed:!0,status:"RTO",isError:!0}),e})();return(0,t.jsx)("div",{className:"fixed inset-0 z-9999 bg-black/50 flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-md rounded-md shadow-lg relative",ref:x,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"Order Tracking"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",a.orderId]})]}),(0,t.jsx)("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(d.IoMdCloseCircle,{className:"text-gray-500",size:20})})]}),(0,t.jsx)("div",{className:"px-6 py-5 max-h-[60vh] overflow-y-auto no-scrollbar",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-[10px] top-2 bottom-2 w-[2px] bg-gray-200"}),(0,t.jsx)("div",{className:"space-y-8",children:g.map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-4 items-start relative",children:[(0,t.jsxs)("div",{className:"z-10 relative",children:[(0,t.jsxs)("div",{className:`
                      w-5 h-5 rounded-full border-2 flex items-center justify-center
                      ${e.isError?"bg-red-600 border-red-600":e.completed?"bg-define-red border-define-red":e.active?"border-define-red bg-white":"border-gray-300 bg-white"}
                    `,children:[e.completed&&!e.isError&&(0,t.jsx)(i.FaCheckCircle,{size:12,className:"text-white"}),e.isError&&(0,t.jsx)(d.IoMdCloseCircle,{size:12,className:"text-white"})]}),r<g.length-1&&(0,t.jsx)("div",{className:`
                        absolute left-1/2 top-5 w-0.5 h-8 -translate-x-1/2
                        ${g[r+1]?.isError?"bg-red-600":g[r+1]?.completed?"bg-define-red":"bg-gray-200"}
                      `})]}),(0,t.jsxs)("div",{className:"flex-1 pb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:`text-sm font-medium ${e.isError?"text-red-700":e.completed?"text-gray-800":e.active?"text-gray-700":"text-gray-400"}`,children:e.title}),e.status===p&&(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${e.isError?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:"Current"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.date}),e.desc&&(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.desc})]})]},r))})]})}),(0,t.jsx)("div",{className:"px-5 py-4 border-t border-gray-200",children:(0,t.jsx)("button",{onClick:s,className:"w-full px-4 py-2 bg-define-brown text-white rounded-md",children:"Close Tracking"})})]})})}var o=e.i(19158),c=e.i(81949),m=e.i(18566),u=e.i(5766),x=e.i(33401);let h={Processing:"bg-yellow-500",Confirmed:"bg-amber-600",Shipped:"bg-blue-500",InTransit:"bg-indigo-500",OutForDelivery:"bg-purple-500",Delivered:"bg-define-brown",Cancelled:"bg-red-500",RTO:"bg-gray-700"};function p(){let{customer:e,loading:l}=(0,o.useCustomer)(),[d,p]=(0,r.useState)([]),[f,g]=(0,r.useState)(1),[b,y]=(0,r.useState)(1),[j,v]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[I,S]=(0,r.useState)({isOpen:!1,orderId:"",orderNumber:"",reason:"",isLoading:!1}),_=(0,m.useRouter)();(0,r.useEffect)(()=>{e?._id&&((async()=>{let t=await (0,c.default)(`https://api.ganpatirudraakshaam.com/api/order/customers/${e._id}?page=${f}&limit=10`);t.data.success&&(p(t.data.data),y(t.data.pagination.totalPages))})(),window.scrollTo({top:0,behavior:"smooth"}))},[e,f]);let O=async()=>{if(!I.orderId||!I.reason.trim())return void u.default.error("Please provide a cancellation reason");S(e=>({...e,isLoading:!0}));try{let e=await c.default.put(`https://api.ganpatirudraakshaam.com/api/order/${I.orderId}`,{status:"Cancelled",cancelReason:I.reason});if(e.data.success)p(e=>e.map(e=>e._id===I.orderId?{...e,status:"Cancelled"}:e)),u.default.success("Order cancelled successfully"),$();else throw Error(e.data.message||"Failed to cancel order")}catch(t){let e=t.response?.data?.message||"Failed to cancel order";u.default.error(e)}finally{S(e=>({...e,isLoading:!1}))}},$=()=>{S({isOpen:!1,orderId:"",orderNumber:"",reason:"",isLoading:!1})},A=e=>{let t=e.product?.variables;return t&&0!==t.length?t.map(e=>`${e.name}: ${e.values.join(", ")}`).join(" | "):null};return l&&1===f?(0,t.jsx)("div",{className:"bg-white p-8 rounded-lg text-center text-gray-500 shadow-sm w-full",children:"Loading..."}):d?.length!==0||j?(0,t.jsxs)("div",{className:"px-4 flex flex-col gap-4 h-[calc(100vh-100px)] overflow-y-auto no-scrollbar",children:[j&&(0,t.jsx)("div",{className:"fixed inset-0 bg-white/50 z-50 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-define-brown"})}),I.isOpen&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Cancel Order #",I.orderNumber]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to cancel this order? This action cannot be undone."}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for cancellation *"}),(0,t.jsx)("textarea",{value:I.reason,onChange:e=>S(t=>({...t,reason:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"Please provide a reason for cancellation...",required:!0})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:$,disabled:I.isLoading,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Go Back"}),(0,t.jsx)("button",{onClick:O,disabled:I.isLoading||!I.reason.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:I.isLoading?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cancelling..."]}):"Confirm Cancellation"})]})]})})}),d?.map(r=>{let l,d=!!r.product?.slug,n=Number(r.product?.status),o=async(t,r)=>{if(0===r)return void u.default.error("This product is out of stock");try{if(!e)return void u.default.error("Please login to proceed");sessionStorage.setItem("BUY_NOW_ITEM",JSON.stringify({productId:t,variantId:void 0,quantity:1,price:t.price})),_.push("/checkout?mode=buy-now")}catch(e){console.error(e),u.default.error("Failed to proceed")}};return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-md bg-white",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 items-start lg:items-center justify-between gap-4 p-4 bg-define-brown text-white text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white",children:"Order Placed"}),(0,t.jsx)("p",{className:"font-medium",children:new Date(r.createdAt).toDateString()})]}),(0,t.jsxs)("div",{className:"text-right lg:text-left",children:[(0,t.jsx)("p",{className:"text-white",children:"Total Amount"}),(0,t.jsxs)("p",{className:"font-medium",children:[(0,t.jsx)(i.FaRupeeSign,{className:"inline"}),r.orderValue.toFixed(0)]})]}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("p",{className:"text-white",children:"Ship To"}),(0,t.jsx)("p",{className:"font-medium",children:e?.name||""})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-white",children:["Order ID: ",(0,t.jsx)("span",{className:"font-medium",children:r.orderId})]}),(0,t.jsxs)("div",{className:"mt-1 space-x-2",children:[(0,t.jsx)(a.default,{href:"#",className:"text-white hover:text-define-red hover:underline",children:"View Order Details"}),(0,t.jsx)("span",{children:"|"}),"Processing"===r.status&&(0,t.jsx)("button",{type:"button",className:"text-white hover:text-define-red hover:underline",onClick:()=>{S({isOpen:!0,orderId:r._id,orderNumber:r.orderId,reason:"",isLoading:!1})},children:"Cancel Order"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-4 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"md:w-[70%] w-full flex flex-col gap-3",children:[(0,t.jsx)("div",{className:" flex flex-col gap-1",children:(l=(e=>{switch(e.status){case"Processing":return{text:"Payment received. Your order is being prepared.",color:"text-orange-600"};case"Confirmed":case"Shipped":return{text:e.shipping?.expectedDeliveryDate?`Expected delivery by ${e.shipping.expectedDeliveryDate}`:"Expected delivery date will be updated soon",color:"text-blue-600"};case"Delivered":return{text:e.shipping?.expectedDeliveryDate?`Delivered on ${e.shipping.expectedDeliveryDate}`:"Delivered successfully",color:"text-define-brown"};case"Cancelled":return{text:"This order has been cancelled",color:"text-red-600"};default:return{text:"Order status updated",color:"text-gray-500"}}})(r),(0,t.jsx)("p",{className:"text-base  mt-2 font-semibold text-gray-500",children:l.text}))}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-center gap-4 w-full ",children:[(0,t.jsx)("div",{className:"md:flex items-center justify-center border border-gray-200 rounded-md w-full md:w-fit  ",children:r.product?.coverImage?.url?(0,t.jsx)("div",{className:"  md:size-40 relative h-72 w-full",children:(0,t.jsx)(s.default,{src:r.product.coverImage.url,alt:r.product?.name||"",fill:!0,className:"object-cover w-full h-full rounded-md  "})}):(0,t.jsx)("div",{className:" size-40 bg-gray-100 text-gray-300 text-center rounded-md flex justify-center items-center",children:"Image Unavailable"})}),(0,t.jsxs)("div",{className:" w-full",children:[(0,t.jsx)(a.default,{href:`/product/${r.product?.slug}`,className:"font-medium text-gray-800 max-w-md",children:r.product?.name||"Product Unabailable"}),(0,t.jsxs)("div",{className:"flex gap-1 text-sm text-gray-600 mt-1 flex-wrap",children:[(0,t.jsx)("p",{children:r.address?.area}),", ",(0,t.jsx)("p",{children:r.address?.city}),",",(0,t.jsx)("p",{children:r.address?.state}),",",(0,t.jsxs)("p",{children:["Pin: ",r.address?.pin]})]}),(0,t.jsxs)("div",{className:" flex flex-wrap gap-2",children:[A(r)&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:A(r)}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["| Qty:"," ",(0,t.jsx)("span",{className:"font-medium",children:r.quantity})]})]}),(0,t.jsxs)("div",{className:"flex md:flex-row flex-col gap-3  mt-4 w-full",children:[d?(0,t.jsx)("button",{onClick:()=>o(r.product,n),disabled:0===n,className:`lg:px-6 lg:py-4 p-3 text-sm  lg:text-sm bg-define-brown text-white rounded hover:bg-define-red w-full md:w-fit text-center ${0===n?"bg-gray-300 text-gray-500 cursor-not-allowed opacity-60":"bg-define-brown hover:bg-define-red text-white"}`,children:"Buy Again"}):(0,t.jsx)("button",{disabled:!0,className:"lg:px-6 lg:py-4 p-3 text-sm lg:text-sm bg-gray-200 text-gray-500 rounded w-full md:w-fit cursor-not-allowed",title:"Product no longer available",children:"Buy Again"}),d?(0,t.jsx)(a.default,{href:`/product/${r.product.slug}`,className:"lg:px-6 lg:py-4 p-3 text-sm lg:text-sm bg-yellow-400 rounded hover:bg-yellow-500 w-full md:w-fit text-center",children:"View Your Item"}):(0,t.jsx)("button",{disabled:!0,className:"lg:px-6 lg:py-4 p-3 text-sm lg:text-xs bg-gray-200 text-gray-500 rounded w-full md:w-fit cursor-not-allowed",title:"Product no longer available",children:"Product Unavailable"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:gap-2 w-full md:w-56",children:[(0,t.jsx)("button",{className:`w-full md:px-4 md:py-2 p-3 text-sm bg-define-brown text-white rounded hover:bg-define-red capitalize ${h[r.status]}`,children:r.status}),(0,t.jsx)("button",{onClick:()=>{C(r),N(!0)},className:"w-full md:px-4 md:py-2 p-3 text-sm bg-define-brown text-white rounded hover:bg-define-red",children:"Track Your Order"}),(0,t.jsx)("button",{className:"w-full md:px-4 md:py-2 p-3 text-sm bg-define-brown text-white rounded hover:bg-define-red",children:"View Return / Replacement"}),"Delivered"===r.status&&(0,t.jsx)(a.default,{href:`/review?product=${r.product?.slug}`,children:(0,t.jsx)("button",{className:"w-full px-4 py-2 text-sm bg-define-brown text-white rounded hover:bg-define-red",children:"Write a Review"})})]})]},r.product?._id||"")]},r.orderId)}),b>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8 pb-4",children:[(0,t.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===f,className:"p-2 border rounded-md hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(x.BiChevronLeft,{size:18})}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[];if(b<=5)for(let t=1;t<=b;t++)e.push(t);else f<=3?e.push(1,2,3,4,"...",b):f>=b-2?e.push(1,"...",b-3,b-2,b-1,b):e.push(1,"...",f-1,f,f+1,"...",b);return e})().map((e,r)=>(0,t.jsx)("button",{disabled:"..."===e,onClick:()=>"number"==typeof e&&g(e),className:`
                  min-w-9 h-9 px-3 rounded-md text-sm font-medium transition-all
                  ${e===f?"bg-define-brown text-white shadow-md":"..."===e?"text-gray-400 cursor-default":"bg-white border border-gray-200 text-gray-700 hover:bg-green-50 hover:text-define-red hover:border-green-200"}
                `,children:e},r))}),(0,t.jsx)("button",{onClick:()=>g(e=>Math.min(b,e+1)),disabled:f===b,className:"p-2 border rounded-md hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(x.BiChevronRight,{size:18})})]}),(0,t.jsx)(n,{open:w,order:k,onClose:()=>{N(!1),C(null)}})]}):(0,t.jsx)("div",{className:"bg-white p-8 rounded-lg text-center text-gray-500 shadow-sm w-full",children:"You have no orders yet"})}e.s(["STATUS_COLORS",0,h,"default",()=>p],21599)},27625,e=>{"use strict";var t=e.i(43476),r=e.i(932),s=e.i(71645),a=e.i(18566),l=e.i(57688),i=e.i(33401),d=e.i(22016),n=e.i(19158),o=e.i(65586),c=e.i(30738),m=e.i(84662),u=e.i(21599),x=e.i(93280);function h(e){let s=(0,r.c)(5),{route:a}=e;if("/my-orders"===a){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(u.default,{}),s[0]=e):e=s[0],e}if("/my-wishlist"===a){let e;return s[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(x.default,{}),s[1]=e):e=s[1],e}if("/my-account"===a){let e;return s[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(o.default,{}),s[2]=e):e=s[2],e}if("/manage-address"===a){let e;return s[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(m.default,{}),s[3]=e):e=s[3],e}if("/my-cart"===a){let e;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(c.default,{}),s[4]=e):e=s[4],e}return null}function p(e){return e.links}e.s(["default",0,()=>{let e,o,c,m,u,x,f,g,b,y=(0,r.c)(20),{customer:j}=(0,n.useCustomer)(),v=(0,a.usePathname)();y[0]===Symbol.for("react.memo_cache_sentinel")?(e={title:"Account Settings",key:"account",links:[{href:"/my-account",label:"My Account"},{href:"/manage-address",label:"Manage Address"}]},y[0]=e):e=y[0],y[1]===Symbol.for("react.memo_cache_sentinel")?(o=[e,{title:"Your Orders",key:"orders",links:[{href:"/my-orders",label:"My Orders"},{href:"/my-wishlist",label:"My Wishlist"},{href:"/my-cart",label:"My Cart"},{href:"/my-reviews",label:"My Reviews"}]}],y[1]=o):o=y[1];let w=o;y[2]===Symbol.for("react.memo_cache_sentinel")?(c={account:!0,orders:!0,payments:!0},y[2]=c):c=y[2];let[N,k]=(0,s.useState)(c),[C,I]=(0,s.useState)(!1),[S,_]=(0,s.useState)(null);y[3]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{let e=()=>I(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},u=[],y[3]=m,y[4]=u):(m=y[3],u=y[4]),(0,s.useEffect)(m,u),y[5]!==C||y[6]!==v?(x=()=>{let e=null;w.forEach(t=>{t.links.some(e=>v.startsWith(e.href))&&(e=t.key)}),C?(_(v),k({account:"account"===e,orders:"orders"===e,payments:"payments"===e})):k({account:!0,orders:!0,payments:!0})},f=[v,C],y[5]=C,y[6]=v,y[7]=x,y[8]=f):(x=y[7],f=y[8]),(0,s.useEffect)(x,f),y[9]!==S||y[10]!==C||y[11]!==v?(g=e=>{let t=C?S===e:v===e;return`px-4 py-2 text-sm rounded-md cursor-pointer transition flex items-center
    ${t?"bg-define-pink text-define-brown font-semibold":"hover:bg-pink-50 text-gray-500"}`},y[9]=S,y[10]=C,y[11]=v,y[12]=g):g=y[12];let O=g,$=C&&S;return y[13]!==S||y[14]!==j?.name||y[15]!==$||y[16]!==C||y[17]!==O||y[18]!==N?(b=(0,t.jsx)("div",{className:"w-full flex flex-col",children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-4 py-2 bg-define-pink text-define-brown font-semibold rounded-md",children:w.flatMap(p).find(e=>e.href===S)?.label}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-md mt-3",children:(0,t.jsx)(h,{route:S})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-define-brown text-white p-4 flex items-center gap-3 shadow rounded-md",children:[(0,t.jsx)("div",{className:"size-10 rounded-full overflow-hidden bg-white",children:(0,t.jsx)(l.default,{src:"/images/profile.png",alt:"profile",width:100,height:100,className:"object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs opacity-90",children:"Good Morning"}),(0,t.jsx)("p",{className:"font-medium leading-tight",children:j?.name})]})]}),w.map(e=>(0,t.jsxs)("div",{className:"rounded overflow-hidden",children:[(0,t.jsxs)("div",{onClick:()=>k(t=>({...t,[e.key]:!t[e.key]})),className:"w-full flex justify-between items-center px-4 py-3 bg-define-pink text-define-brown font-semibold",children:[e.title,(0,t.jsx)(i.BiChevronDown,{size:16,className:`transition-transform duration-300 ${N[e.key]?"rotate-180":""}`})]}),N[e.key]&&(0,t.jsx)("ul",{className:"bg-white text-gray-600 flex flex-col gap-1 p-2",children:e.links.map(e=>(0,t.jsx)("li",{children:C?(0,t.jsx)("div",{onClick:()=>_(e.href),className:O(e.href),children:e.label}):(0,t.jsx)(d.default,{href:e.href,className:O(e.href),children:e.label})},e.href))})]},e.key))]})}),y[13]=S,y[14]=j?.name,y[15]=$,y[16]=C,y[17]=O,y[18]=N,y[19]=b):b=y[19],b}],27625)}]);