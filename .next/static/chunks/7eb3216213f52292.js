(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},31127,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(57688),a=e.i(19158),l=e.i(18566),i=e.i(5766),o=e.i(81949),d=e.i(10936);function n({productDetails:e}){let[n,c]=(0,s.useState)(0),[m,u]=(0,s.useState)(0),[p,x]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[g,v]=(0,s.useState)([]),b=(0,s.useRef)(null),{customer:j}=(0,a.useCustomer)(),y=(0,l.useRouter)();async function w(){try{if(!e)return alert("Product not found");if(p.length<=0||p.length>70)return i.default.error("Title must be between 1 and 70 characters");if(f.length<=0||f.length>300)return i.default.error("Description must be between 1 and 300 characters");let t=new FormData;t.append("title",p),t.append("description",f),t.append("rating",n.toString()),g.forEach(e=>{t.append("images",e)}),t.append("productId",e?._id??""),t.append("customerId",j?._id??"");let{status:s,data:r}=await o.default.post("https://api.ganpatirudraakshaam.com/api/review",t,{headers:{"Content-Type":"multipart/form-data"}});if(201===s){i.default.success("Review submitted successfully"),v([]),x(""),h(""),c(0),u(0),y.push("/my-orders");return}throw Error(r.message)}catch(e){console.error(e),i.default.error(e.response?.data?.message??e.message??"Failed to submit review")}}return(0,s.useEffect)(()=>()=>{g.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)})},[]),(0,t.jsxs)("div",{className:"max-w-225 mx-auto bg-white px-4 rounded-md shadow-sm py-8 md:my-6",children:[(0,t.jsxs)("div",{className:"flex gap-4 border-b border-gray-300 pb-4",children:[(0,t.jsx)("div",{className:"relative w-24 h-24 border border-gray-300 rounded",children:(0,t.jsx)(r.default,{src:e?.coverImage?.url??"",alt:"Product",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-800",children:e?.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e?.brand?.name})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("p",{className:"font-medium mb-2",children:"Rate this product"}),(0,t.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>c(e),onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),children:(0,t.jsx)(d.IoMdStar,{size:28,className:`${e<=(m||n)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},e))})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Review title"}),(0,t.jsx)("input",{type:"text",placeholder:"Eg: Very good product",className:"w-full border   border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-define-red",onChange:e=>x(e.target.value),value:p})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Your review"}),(0,t.jsx)("textarea",{rows:4,value:f,onChange:e=>h(e.target.value),placeholder:"Share details of your experience",className:"w-full border  border-gray-300  rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-define-red"})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:"Supported Files (optional)"}),(0,t.jsxs)("label",{className:"inline-flex items-center gap-2 px-4 py-2 border  border-gray-300 rounded cursor-pointer text-sm hover:bg-gray-50",children:[(0,t.jsx)("input",{type:"file",ref:b,multiple:!0,hidden:!0,accept:"image/*,video/*",onChange:e=>{let t=e.target.files;if(!t)return;let s=Array.from(t).map(e=>((e.type.startsWith("image/")||e.type.startsWith("video/"))&&(e.preview=URL.createObjectURL(e)),e));v(e=>[...e,...s]),b.current&&(b.current.value="")}}),"ðŸ“· Upload Photos / Videos"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 mt-2",children:g.map((e,s)=>(0,t.jsxs)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden bg-gray-50 hover:bg-gray-100 transition-all",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{let e;(e=g[s]).preview&&URL.revokeObjectURL(e.preview),v(e=>e.filter((e,t)=>t!==s))},className:"absolute top-1 right-1 z-10 w-6 h-6 text-red-500 flex items-center justify-center text-xs hover:text-red-600 transition-colors","aria-label":`Remove ${e.name}`,children:(0,t.jsx)(d.IoMdClose,{})}),(0,t.jsx)("div",{className:"aspect-square flex items-center justify-center",children:e.type.startsWith("image/")&&e.preview?(0,t.jsx)("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):e.type.startsWith("video/")&&e.preview?(0,t.jsxs)("div",{className:"relative w-full h-full",children:[(0,t.jsx)("video",{src:e.preview,className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-3xl",children:"ðŸŽ¬"})})]}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center p-4",children:(0,t.jsx)("span",{className:"text-2xl mb-2",children:e.type.startsWith("image/")?"ðŸ–¼ï¸":e.type.startsWith("video/")?"ðŸŽ¬":"ðŸ“„"})})})]},`${e.name}-${s}`))})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:w,className:"   mt-3 sm:mt-auto flex items-center justify-center gap-2   text-white font-semibold   text-xs sm:text-sm md:text-[15px]   px-3 py-1.5 sm:px-4 sm:py-2 md:px-5   rounded-full   btn-grad    active:scale-95   w-full sm:w-fit   ",children:"Submit Review"})})]})}e.s(["default",()=>n])}]);