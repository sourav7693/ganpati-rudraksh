(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,l)=>{t.exports=e.r(76562)},46124,e=>{"use strict";e.s(["allowOnlyNumbers",0,e=>{let t=e.key;"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&(/^[0-9]$/.test(t)||e.preventDefault())},"blockNumbersInText",0,e=>{let t=e.key;"Backspace"!==t&&"Delete"!==t&&"ArrowLeft"!==t&&"ArrowRight"!==t&&"Tab"!==t&&/^[0-9]$/.test(t)&&e.preventDefault()}])},10930,e=>{"use strict";var t=e.i(43476),l=e.i(62443),a=e.i(19158),s=e.i(46124),r=e.i(57688),n=e.i(18566),o=e.i(71645),i=e.i(5766);function d(){let{refreshCustomer:e,clearCustomer:d,logoutCustomer:c}=(0,a.useCustomer)(),[u,m]=(0,o.useState)(0),g=(0,n.useSearchParams)(),f=g.get("mode"),x=g.get("mobile"),b="update-mobile"===f,p=(0,n.useRouter)(),[h,y]=(0,o.useState)("login"),[w,N]=(0,o.useState)("MOBILE"),[j,v]=(0,o.useState)(""),[O,C]=(0,o.useState)(""),[T,S]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=localStorage.getItem("otpCooldownUntil");if(e){let t=Math.floor((Number(e)-Date.now())/1e3);t>0?m(t):localStorage.removeItem("otpCooldownUntil")}},[]),(0,o.useEffect)(()=>{if(u<=0)return;let e=setInterval(()=>{m(e=>e<=1?(localStorage.removeItem("otpCooldownUntil"),0):e-1)},1e3);return()=>clearInterval(e)},[u]),(0,o.useEffect)(()=>{x&&(v(x.replace("91","")),y("login"))},[x]);let k=e=>{let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`},P=async()=>{if(!T){if(10!==j.length)return void i.default.error("Enter valid 10-digit mobile number");if(!(u>0))try{S(!0);let e=await (0,l.sendOtp)(j);if(console.log(e),e.success){i.default.success(e.message||"OTP sent successfully!"),N("OTP");let t=Date.now()+6e5;localStorage.setItem("otpCooldownUntil",String(t)),m(600)}}catch(e){i.default.error(e.message||"Failed to send OTP")}finally{S(!1)}}},E=async t=>{if(!T){if(6!==O.length)return void i.default.error("Enter valid 6-digit OTP");try{S(!0);let a=t?await (0,l.verifyOtpUpdateMobile)(j,O,"update-mobile"):await (0,l.verifyOtp)(j,O);if(a.success){if(await e(),localStorage.removeItem("otpCooldownUntil"),m(0),v(""),C(""),N("MOBILE"),a.forceLogout){i.default.success(a.message||"Number updated. Please login again."),d(),p.replace("/login");return}i.default.success("Login successful!"),p.replace("/")}}catch(e){i.default.error(e.message||"OTP verification failed")}finally{S(!1)}}};return(0,t.jsx)("div",{className:"w-full bg-[#f5f5f5] py-10 px-4",children:(0,t.jsxs)("div",{className:"max-w-200  mx-auto bg-white rounded-md overflow-hidden flex shadow-sm",children:[(0,t.jsxs)("div",{className:"hidden md:flex relative bg-linear-to-b gap-2 from-[#5a1d0c] to-[#8a3a28] text-white p-8 md:p-10 flex-col justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold leading-snug",children:["Looks like you're a",(0,t.jsx)("br",{}),"member!"]}),(0,t.jsx)("div",{className:"mt-8 md:mt-0 flex justify-center",children:(0,t.jsx)(r.default,{src:"/images/login.png",alt:"Login Illustration",width:280,height:280,className:"object-contain"})})]}),(0,t.jsx)("div",{className:"p-8 md:p-10",children:"MOBILE"===w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:b?"Verify Mobile Number":"login"===h?"Enter Login Details":"Enter Signup Details"}),(0,t.jsx)("input",{type:"tel",maxLength:10,placeholder:"Enter Mob No.",value:j,onChange:e=>v(e.target.value.replace(/\D/g,"")),onKeyDown:s.allowOnlyNumbers,className:"w-full border border-gray-300 rounded-sm px-4 py-3 text-sm outline-none focus:border-[#5a1d0c]"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-4 leading-relaxed",children:["By continuing, you agree to"," ",(0,t.jsx)("span",{className:"text-[#5a1d0c] font-medium cursor-pointer",children:"Ganpati Rudraksh"})," ",(0,t.jsx)("span",{className:"underline cursor-pointer",children:"Terms of Use"})," ","and"," ",(0,t.jsx)("span",{className:"underline cursor-pointer",children:"Privacy Policy"}),"."]}),(0,t.jsx)("button",{onClick:P,disabled:T||10!==j.length||u>0,className:"w-full mt-6 bg-[#5a1d0c] hover:bg-[#4a1609] text-white py-3 rounded-sm text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:T?"Sending OTP...":u>0?`Resend in ${k(u)}`:"login"===h?"Request OTP":"Continue"}),"login"===h?(0,t.jsx)("button",{onClick:()=>y("signup"),className:"w-full mt-20 text-[14px] text-define-brown",children:"New to Ganpati Rudraksham? Create an account"}):(0,t.jsx)("button",{onClick:()=>y("login"),className:"w-full mt-4 bg-[#FFBB00] text-black py-3 rounded-sm text-sm font-medium",children:"Existing User? Log In"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enter OTP"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["OTP sent to +91 ",j]}),b&&(0,t.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"You will be logged out after changing your mobile number."}),(0,t.jsx)("input",{type:"number",maxLength:6,placeholder:"Enter 6-digit OTP",value:O,onChange:e=>C(e.target.value.replace(/\D/g,"")),className:"w-full border border-gray-300 rounded-sm px-4 py-3 text-sm outline-none focus:border-[#5a1d0c]"}),(0,t.jsx)("button",{onClick:()=>b?E(!0):E(),disabled:T||6!==O.length,className:"w-full mt-6 bg-[#5a1d0c] hover:bg-[#4a1609] text-white py-3 rounded-sm text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:T?"Verifying...":b?"Verify & Update Number":"Verify & Continue"}),(0,t.jsx)("button",{onClick:()=>{C(""),N("MOBILE"),localStorage.removeItem("otpCooldownUntil"),m(0)},className:"block w-full mt-4 text-sm underline text-gray-600",children:"Change mobile number"}),u>0?(0,t.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-3",children:["Resend OTP in"," ",(0,t.jsx)("span",{className:"font-semibold",children:k(u)})]}):(0,t.jsx)("button",{onClick:P,className:"block w-full mt-3 text-sm underline text-[#5a1d0c]",children:"Resend OTP"})]})})]})})}e.s(["default",()=>d])}]);