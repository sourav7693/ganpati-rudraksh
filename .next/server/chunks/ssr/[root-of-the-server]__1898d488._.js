module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},67137,a=>{"use strict";var b=a.i(83490);let c=async(a,c,d,e=1,f)=>(await b.default.post(`https://api.ganpatirudraakshaam.com/api/customer/${a}/cart`,{productId:c,variantId:d,quantity:e,priceAtTime:f},{withCredentials:!0})).data,d=async(a,c,d)=>(await b.default.delete(`https://api.ganpatirudraakshaam.com/api/customer/${a}/cart`,{data:{productId:c,variantId:d},withCredentials:!0})).data;a.s(["addToCartApi",0,c,"removeFromCartApi",0,d])},7107,a=>{"use strict";var b=a.i(83490);let c=async(a,c)=>(await b.default.post(`https://api.ganpatirudraakshaam.com/api/customer/${a}/wishlist`,{productId:c},{withCredentials:!0})).data;a.s(["removeWishlistApi",0,(a,c)=>b.default.delete(`https://api.ganpatirudraakshaam.com/api/customer/remove-wishlist/${a}/${c}`,{withCredentials:!0}),"toggleWishlistApi",0,c])},96790,a=>{"use strict";var b=a.i(87924),c=a.i(67137),d=a.i(7107),e=a.i(46086),f=a.i(71987),g=a.i(38246),h=a.i(50944),i=a.i(72131),j=a.i(6704),k=a.i(76547),l=a.i(97168);a.s(["default",0,()=>{let{customer:a,refreshCustomer:m}=(0,e.useCustomer)(),n=a?._id,[o,p]=(0,i.useState)(!1),q=(0,h.useRouter)(),r=async a=>{if(n&&!o){p(!0);try{await (0,d.removeWishlistApi)(n,a.product._id),await m(),j.toast.success("Removed from wishlist")}catch(a){console.log(a),j.toast.error("Failed to remove from wishlist")}finally{p(!1)}}},s=async a=>{if(n&&!o){p(!0);try{await (0,c.addToCartApi)(n,a.product._id,void 0,1,a.product.price),await (0,d.removeWishlistApi)(n,a.product._id),await m(),j.toast.success("Moved to cart"),q.push("/my-cart")}catch(a){console.log(a),j.toast.error("Failed to move to cart")}finally{p(!1)}}};return(0,b.jsxs)("div",{className:"flex flex-col gap-6 px-4 lg:px-8 h-[calc(100vh-100px)] overflow-y-auto no-scrollbar",children:[(0,b.jsxs)("h1",{className:"text-xl font-bold text-define-red",children:["Wishlist (",a?.wishlist?.length||0,")"]}),(0,b.jsx)("div",{children:a?.wishlist?.length===0?(0,b.jsx)("p",{className:"text-gray-500 text-center",children:"Your wishlist is empty."}):(0,b.jsx)("div",{className:"flex flex-col gap-4",children:a?.wishlist?.map(a=>(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2 rounded border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(f.default,{src:a.product.coverImage?.url,alt:a.product.coverImage?.public_id,width:200,height:200,className:"aspect-square rounded object-cover"})}),(0,b.jsxs)("div",{className:"flex flex-col justify-between w-full gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-base sm:text-lg md:text-xl font-medium text-gray-800 leading-snug",children:a.product.name}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:a.product.variables?.map(a=>a.name).join(", ")}),a.product.price&&(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-base sm:text-lg md:text-xl font-semibold text-define-red",children:[(0,b.jsx)(l.FaIndianRupeeSign,{className:"inline"}),a.product.price.toFixed(0)]}),(0,b.jsxs)("span",{className:"line-through text-gray-500 text-xs sm:text-sm",children:[(0,b.jsx)(l.FaIndianRupeeSign,{className:"inline"}),a.product.mrp.toFixed(0)]}),(0,b.jsxs)("span",{className:"text-xs text-define-brown font-medium",children:[a.product.discount,"% OFF"]})]})]}),(0,b.jsxs)("button",{className:"   mt-3 sm:mt-auto flex items-center justify-center gap-2   text-white font-semibold   text-xs sm:text-sm md:text-[15px]   px-3 py-1.5 sm:px-4 sm:py-2 md:px-5   rounded-full   btn-grad hover:scale-[1.03]   active:scale-95   w-full sm:w-fit   ",onClick:()=>s(a),children:[(0,b.jsx)(k.CgShoppingCart,{size:14,className:"sm:size-[16px]"}),(0,b.jsx)("span",{className:"whitespace-nowrap",children:"Add to Cart"})]})]}),(0,b.jsxs)("div",{className:"flex flex-row lg:flex-col items-center lg:items-end gap-2 justify-between lg:justify-center",children:[(0,b.jsx)(g.default,{href:`/product/${a.product.slug}`,className:" w-full inline-flex items-center justify-center   bg-gray-100   border border-gray-200   transition-all duration-300   hover:bg-gray-200 hover:border-gray-300 text-nowrap px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-medium text-define-brown   ",children:"View Item"}),(0,b.jsx)("button",{onClick:()=>r(a),className:"w-full inline-flex items-center justify-center bg-define-red/10  text-define-red text-xs sm:text-sm font-medium px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all duration-300 hover:bg-define-red/20 hover:text-define-red/90",children:"Delete"})]})]},a._id))})})]})}])},42814,a=>{"use strict";var b=a.i(87924);a.i(98665);var c=a.i(46086),d=a.i(56508),e=a.i(50944),f=a.i(72131),g=a.i(6704);function h(){let a=(0,e.useRouter)(),[h,i]=(0,f.useState)(!1),[j,k]=(0,f.useState)(!1),[l,m]=(0,f.useState)(!1),[n,o]=(0,f.useState)(!1),{customer:p,loading:q,logoutCustomer:r,clearCustomer:s,refreshCustomer:t}=(0,c.useCustomer)(),[u,v]=(0,f.useState)(p?.gender||"male"),[w,x]=(0,f.useState)(p?.name||""),[y,z]=(0,f.useState)(p?.email||""),[A,B]=(0,f.useState)(p?.mobile||""),C=a=>`border px-4 py-3 text-sm rounded-sm outline-none
     ${a?"border-gray-300 bg-white focus:border-[#2874F0]":"border-gray-200 bg-gray-50 cursor-not-allowed"}`,D=a=>{p&&("personal"===a&&(x(p.name||""),v(p.gender||"male"),i(!1)),"email"===a&&(z(p.email||""),k(!1)),"mobile"===a&&(B(p.mobile||""),m(!1)))},E=async(a,b)=>{if(!p?._id||!b.trim()){console.log(p?._id,b),console.warn("Invalid update attempt:",{key:a,value:b});return}"mobile"!==a||b.startsWith("91")||(b="91"+b);try{let c=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${p._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({[a]:b})});if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.message||"Update failed")}let d=await c.json();return g.default.success("Update successful"),d.data}catch(a){throw g.default.error(a.message||"Update failed"),a}};(0,f.useEffect)(()=>{!q&&p&&(v(p?.gender||"male"),x(p.name||""),z(p.email||""),B(p.mobile||""),o(!0))},[p,q]),(0,f.useEffect)(()=>{p&&u!==p.gender&&E("gender",u).catch(a=>{console.error("Failed to update gender:",a)})},[u]);let F=async()=>{await E("name",w),await t(),i(!1)},G=async()=>{await E("email",y),await t(),k(!1)},H=async()=>{let b=A;if(!b.trim())return void g.default.error("Mobile number cannot be empty");if(b.length<10)return void g.default.error("Enter valid mobile number");if(b.startsWith("91")||(b="91"+b),b===p?.mobile)return void g.default.error("Already your current number");let c=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/check-mobile?mobile=${b}`,{credentials:"include"});(await c.json()).exists?g.default.error("Mobile already registered with another account"):(g.default.success("OTP verification required"),a.push(`/login?mode=update-mobile&mobile=${b}`))};return q||!n?(0,b.jsx)("div",{className:"bg-white rounded-md p-6 md:p-8 md:pb-30 relative overflow-hidden",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-10 bg-gray-100 rounded"}),(0,b.jsx)("div",{className:"h-10 bg-gray-100 rounded"}),(0,b.jsx)("div",{className:"h-10 bg-gray-100 rounded"})]})}):(0,b.jsxs)("div",{className:"bg-white lg:px-8 lg:py-0 p-8 ",children:[(0,b.jsxs)("section",{className:"mb-14",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),(0,b.jsx)("button",{onClick:()=>h?D("personal"):i(!0),className:"text-sm font-bold text-define-brown",children:h?"Cancel":"Edit"})]}),(0,b.jsxs)("div",{className:"flex items-start gap-6 mb-6",children:[(0,b.jsx)("div",{className:"flex gap-6",children:(0,b.jsx)("input",{placeholder:"Full Name",disabled:!h,value:w,onKeyDown:d.blockNumbersInText,onChange:a=>x(a.target.value),className:`${C(h)} w-[260px]`})}),h&&(0,b.jsx)("button",{onClick:F,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-800 mb-4",children:"Your Gender"}),(0,b.jsx)("div",{className:"flex gap-10 text-sm text-gray-900",children:["male","female"].map(a=>(0,b.jsxs)("label",{className:`flex items-center gap-3 ${!h&&"opacity-60"}`,children:[(0,b.jsx)("input",{type:"radio",disabled:!h,checked:u===a,onChange:()=>v(a)}),a.charAt(0).toUpperCase()+a.slice(1)]},a))})]})]}),(0,b.jsxs)("section",{className:"mb-14",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Address"}),(0,b.jsx)("button",{onClick:()=>j?D("email"):k(!0),className:"text-sm font-bold text-define-brown",children:j?"Cancel":"Edit"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("input",{placeholder:"Email Address",disabled:!j,value:y,onChange:a=>z(a.target.value),className:`${C(j)} w-[280px]`}),j&&(0,b.jsx)("button",{onClick:G,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Mobile Number"}),(0,b.jsx)("button",{onClick:()=>l?D("mobile"):m(!0),className:"text-sm font-bold text-define-brown",children:l?"Cancel":"Edit"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("input",{type:"tel",maxLength:10,placeholder:"Mobile No",disabled:!l,value:A,onChange:a=>B(a.target.value),onKeyDown:d.allowOnlyNumbers,className:`${C(l)} w-[260px]`}),l&&(0,b.jsx)("button",{onClick:H,className:"h-[46px] px-10 bg-define-brown text-white text-sm font-medium rounded-sm",children:"SAVE"})]})]})]})}a.s(["default",()=>h])},56508,a=>{"use strict";a.s(["allowOnlyNumbers",0,a=>{let b=a.key;"Backspace"!==b&&"Delete"!==b&&"ArrowLeft"!==b&&"ArrowRight"!==b&&"Tab"!==b&&(/^[0-9]$/.test(b)||a.preventDefault())},"blockNumbersInText",0,a=>{let b=a.key;"Backspace"!==b&&"Delete"!==b&&"ArrowLeft"!==b&&"ArrowRight"!==b&&"Tab"!==b&&/^[0-9]$/.test(b)&&a.preventDefault()}])},40680,a=>{"use strict";var b=a.i(87924),c=a.i(56508);a.s(["default",0,function({form:a,onChange:d}){let e=(b,c)=>d({...a,[b]:c});async function f(b){if(6===b.length)try{let c=await fetch(`https://api.ganpatirudraakshaam.com/api/pickup/location/${b}`);if(!c.ok)return;let e=await c.json(),f=e?.PostOffice||(Array.isArray(e)?e[0]?.PostOffice:null);f?.length>0&&d({...a,pin:b,city:f[0]?.District||"",state:f[0]?.State||""})}catch(a){console.error("Error fetching pin code details:",a)}}return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700",children:[(0,b.jsx)("input",{placeholder:"Name",value:a.name,onChange:a=>e("name",a.target.value),onKeyDown:c.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"tel",placeholder:"Mobile Number",value:a.mobile,maxLength:10,onKeyDown:c.allowOnlyNumbers,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&!(b.length>10)&&e("mobile",b)},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),a.mobile&&a.mobile.length<10&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 10 digits"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"tel",placeholder:"Pin Code",value:a.pin,maxLength:6,onKeyDown:c.allowOnlyNumbers,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&!(b.length>6)&&(e("pin",b),6===b.length&&f(b))},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),a.pin&&a.pin.length<6&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 6 digits"})]}),(0,b.jsx)("input",{placeholder:"Area",value:a.area,onChange:a=>e("area",a.target.value),onKeyDown:c.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,b.jsx)("input",{placeholder:"City",value:a.city,onChange:a=>e("city",a.target.value),onKeyDown:c.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,b.jsx)("input",{placeholder:"State",value:a.state,onChange:a=>e("state",a.target.value),onKeyDown:c.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,b.jsx)("input",{placeholder:"Landmark",value:a.landmark||"",onChange:a=>e("landmark",a.target.value),onKeyDown:c.blockNumbersInText,className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"tel",placeholder:"Alternative Phone",value:a.alternateMobile||"",maxLength:10,onKeyDown:c.allowOnlyNumbers,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&!(b.length>10)&&e("alternateMobile",b)},className:"border border-gray-200 rounded-md px-4 py-3 text-sm w-full outline-none"}),a.alternateMobile&&a.alternateMobile.length>0&&a.alternateMobile.length<10&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Must be 10 digits"})]})]}),(0,b.jsx)("div",{className:"mt-4 flex gap-6 text-sm text-defined-green",children:["Home","Office","Others"].map(c=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:a.type===c,onChange:()=>e("type",c)}),c]},c))})]})}])},7414,a=>{"use strict";var b=a.i(87924),c=a.i(46086),d=a.i(72131),e=a.i(6704),f=a.i(39154),g=a.i(56973),h=a.i(40680);function i({open:a,text:c="Are you sure?",id:e,onConfirm:f,onCancel:g}){return((0,d.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[a]),a)?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white w-[90%] max-w-sm rounded-lg p-6 shadow-xl animate-fadeIn",children:[(0,b.jsx)("p",{className:"text-gray-800 text-sm mb-6",children:c}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:g,className:"px-4 py-2 text-sm border rounded-md",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>f(e),className:"px-4 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}):null}let j={name:"",mobile:"",alternateMobile:"",pin:"",area:"",city:"",state:"",landmark:"",type:"Home"};function k(){let{customer:a}=(0,c.useCustomer)(),[k,l]=(0,d.useState)(!1),[m,n]=(0,d.useState)(),[o,p]=(0,d.useState)([]),[q,r]=(0,d.useState)(null),s=(0,d.useRef)(!1);(0,d.useEffect)(()=>{a?.addresses&&(s.current||(p(a.addresses),s.current=!0))},[a?._id]);let t=async()=>{if(a?._id&&q){if(!q.name||!q.mobile||!q.pin||!q.area||!q.city||!q.state||!q.landmark)return void e.default.error("Please fill all required fields");try{let b=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${a._id}/address`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(q)}),c=await b.json();if(!b.ok||!c.address)throw Error();p(a=>[...a,c.address]),e.default.success("Address added"),r(null)}catch{e.default.error("Failed to add address")}}},u=async()=>{if(a?._id&&q?._id){if(!q.name||!q.mobile||!q.pin||!q.area||!q.city||!q.state||!q.landmark)return void e.default.error("Please fill all required fields");if(10!==q.mobile.length)return void e.default.error("Mobile number must be 10 digits");if(q.alternateMobile&&10!==q.alternateMobile.length)return void e.default.error("Alternate mobile number must be 10 digits");if(6!==q.pin.length)return void e.default.error("Pin code must be 6 digits");try{let b=await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${a._id}/address/${q._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(q)}),c=await b.json();if(!b.ok||!c.address)throw Error();p(a=>a.map(a=>a._id===q._id?c.address:a)),e.default.success("Address updated"),r(null)}catch{e.default.error("Failed to update address")}}},v=async b=>{if(a?._id&&b){p(a=>a.filter(a=>a._id!==b));try{if(!(await fetch(`https://api.ganpatirudraakshaam.com/api/customer/${a._id}/address/${b}`,{method:"DELETE",credentials:"include"})).ok)throw Error();e.default.success("Address removed")}catch{p(o),e.default.error("Failed to remove address")}}},w=async a=>{l(!1),a&&await v(a)};return(0,b.jsxs)("div",{className:"bg-white rounded-md px-6 flex flex-col gap-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)("button",{onClick:()=>r({...j}),className:"bg-define-brown text-white px-4 py-2 rounded-md text-sm",children:"+ Add Address"})}),q&&(0,b.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 space-y-4 shadow-defined-light",children:[(0,b.jsx)(h.default,{form:q,onChange:r}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:q._id?u:t,className:"bg-define-brown text-white px-5 py-2 rounded-md text-sm",children:q._id?"Update Address":"Save Address"}),(0,b.jsx)("button",{onClick:()=>r(null),className:"border px-5 py-2 rounded-md text-sm",children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"flex flex-col gap-3",children:o.map(a=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 flex justify-between shadow-defined-light",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs bg-define-brown text-white px-2 py-0.5 rounded",children:a.type}),(0,b.jsxs)("p",{className:"font-semibold mt-1",children:[a.name," ",(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["| ",a.mobile]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:[a.area,a.city,a.state,a.pin].filter(Boolean).join(", ")})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(f.BiPencil,{size:16,className:"text-green-600 cursor-pointer",onClick:()=>r(a)}),(0,b.jsx)(g.BsTrash2,{size:16,className:"text-red-500 cursor-pointer",onClick:()=>{n(a._id),l(!0)}})]})]},a._id))}),(0,b.jsx)(i,{open:k,id:m,text:"Are you sure you want to delete this address?",onConfirm:w,onCancel:()=>l(!1)})]})}a.s(["default",()=>k],7414)},5176,a=>{"use strict";var b=a.i(87924),c=a.i(67137),d=a.i(7107),e=a.i(46086),f=a.i(34239),g=a.i(71987),h=a.i(38246),i=a.i(50944),j=a.i(72131),k=a.i(6704),l=a.i(71682);a.s(["default",0,()=>{let a=(0,i.useRouter)(),{customer:m,refreshCustomer:n,loading:o}=(0,e.useCustomer)(),p=m?._id,[q,r]=(0,j.useState)([]),s=(0,j.useRef)(!1),[t,u]=(0,j.useState)(!1);(t||o)&&f.default;let v=a=>{let b=a.productId.stock||0;return 0===b?"out":b<=3?"low":"available"};(0,j.useEffect)(()=>{m?._id&&r(m.cart)},[m?.cart]),(0,j.useEffect)(()=>{s.current&&localStorage.setItem("LOCAL_CART",JSON.stringify(q))},[q]);let w=async(a,b)=>{if(!p||b<1)return;let d=a.productId.stock||0;if(v(a),b>d)return void k.default.error(`Only ${d} products are in stock`);r(c=>c.map(c=>c.productId===a.productId&&c.variantId===a.variantId?{...c,quantity:b}:c));try{await (0,c.addToCartApi)(p,a.productId?._id,a.variantId?._id,b-a.quantity,a.priceAtTime),await n()}catch(a){console.error(a)}},x=async a=>{if(!p)return;u(!0);let b=a.productId._id,d=a.variantId?._id;r(a=>a.filter(a=>a.productId._id!==b||a.variantId?._id!==d));try{await (0,c.removeFromCartApi)(p,b,d),await n()}catch(a){k.default.error("Failed to remove item"),r(m?.cart)}finally{u(!1)}},y=async a=>{if(!p)return;let b=a.productId._id,e=a.variantId?._id;r(a=>a.filter(a=>a.productId._id!==b||a.variantId?._id!==e));try{await (0,d.toggleWishlistApi)(p,b),await (0,c.removeFromCartApi)(p,b,e),k.default.success("Moved to wishlist")}catch(a){k.default.error("Failed to move to wishlist"),r(m?.cart)}},z=q.filter(a=>"out"!==v(a)),A=z.reduce((a,b)=>a+(b.productId.mrp||0)*b.quantity,0),B=z.reduce((a,b)=>{let c=b.productId;return a+(c.mrp||0)*(c.discount||0)/100*b.quantity},0),C=A-B,D=z.reduce((a,b)=>a+b.quantity,0),E=q.length>z.length,F=q.slice().reverse();return(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-center  h-[calc(100vh-100px)] overflow-y-auto no-scrollbar",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-6 lg:px-2 px-0 self-start basis-full w-full",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-xl font-bold text-define-red",children:["Cart (",m?.cart?.length||0,")"]}),E&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"⚠️ Some items are out of stock and removed from checkout"})]}),(0,b.jsx)("div",{className:"flex flex-col gap-4 w-full",children:0===F.length?(0,b.jsx)("p",{className:"text-gray-500 text-center w-full",children:"Your cart is empty."}):F.map(a=>{let c=v(a),d=a.productId.stock||0,e="out"===c,f=a.quantity<d,i=a.productId,j=i.price*a.quantity,k=i.mrp*a.quantity;return(0,b.jsxs)("div",{className:`flex flex-col md:flex-row bg-white border rounded-md p-4 gap-4 ${e?"border-red-200 bg-red-50":"border-gray-200"}`,children:[(0,b.jsxs)("div",{className:"flex flex-col items-center w-full md:w-40",children:[(0,b.jsx)("div",{className:"relative w-full  h-[20rem] md:h-40  bg-gray-100 rounded overflow-hidden",children:(0,b.jsx)(g.default,{src:a.productId.coverImage.url||"",alt:a.productId.name||"",fill:!0,className:"object-cover h-full w-full"})}),(0,b.jsxs)("div",{className:"md:flex hidden items-center mt-3",children:[(0,b.jsx)("button",{onClick:()=>w(a,a.quantity-1),className:"size-[2rem] border  border-gray-200 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a.quantity<=1||e,children:"−"}),(0,b.jsx)("span",{className:" h-[2rem] w-fit px-4 flex justify-center items-center border text-define-red  border-gray-200 mx-2 min-w-[40px] text-center",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>w(a,a.quantity+1),className:`size-[2rem] border rounded-full disabled:opacity-50 disabled:cursor-not-allowed ${f&&!e?"border-gray-200  hover:bg-gray-100":"border-gray-300 text-gray-400 bg-gray-50"}`,disabled:!f||e,children:"+"})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,b.jsxs)(h.default,{href:`/product/${a.productId.slug}`,children:[(0,b.jsx)("h3",{className:"font-semibold text-[18px] text-define-brown",children:a.productId.name}),(0,b.jsx)("p",{className:"mt-2 text-sm ",children:a.productId.variables?.map(a=>`${a.name}: ${a.values.join(", ")}`).join(" | ")}),(0,b.jsx)("p",{className:"mt-2 text-sm  line-clamp-1",dangerouslySetInnerHTML:{__html:a.productId.shortDescription}}),(0,b.jsxs)("p",{className:"mt-2 font-bold text-define-red text-lg",children:[(0,b.jsx)(l.FaRupeeSign,{className:"inline"}),j.toFixed(0),(0,b.jsxs)("span",{className:"line-through text-gray-400 text-sm ml-3",children:[(0,b.jsx)(l.FaRupeeSign,{className:"inline"}),k.toFixed(0)]}),(0,b.jsxs)("span",{className:"text-define-green text-[13px] ml-2 font-normal",children:[a.productId.discount,"% OFF"]})]}),e?(0,b.jsx)("div",{className:"mt-2 px-3 w-fit py-1 bg-red-100 text-red-700 text-sm rounded-full font-medium",children:"Out of Stock"}):""]}),(0,b.jsxs)("div",{className:"md:flex hidden gap-2 lg:gap-4 lg:justify-evenly items-center lg:justify-start md:pb-1 max-lg:mt-3",children:[(0,b.jsx)("button",{className:`font-bold text-sm lg:text-base  ${e?"text-gray-400 cursor-not-allowed":"hover:text-defined-green "}`,onClick:()=>y(a),disabled:e,children:"MOVE TO WISHLIST"}),(0,b.jsx)("button",{onClick:()=>x(a),className:`font-semibold text-sm lg:text-base  ${e?"text-red-400":" hover:text-red-500"}`,children:"REMOVE"})]}),(0,b.jsxs)("div",{className:"flex md:hidden items-center gap-4 mt-3 w-full",children:[(0,b.jsxs)("div",{className:"flex lg:hidden items-center border border-gray-200 rounded-md overflow-hidden h-[40px]",children:[(0,b.jsx)("button",{onClick:()=>w(a,a.quantity-1),className:"px-2 h-full bg-gray-50  hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:a.quantity<=1||e,children:"−"}),(0,b.jsx)("span",{className:"px-3 h-full flex items-center justify-center text-sm font-semibold  border-x border-gray-200 min-w-[40px]",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>w(a,a.quantity+1),className:`px-2 h-full transition-colors ${f&&!e?"bg-gray-50  hover:bg-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!f||e,children:"+"})]}),(0,b.jsx)("button",{className:`h-[40px]    text-[13px] font-medium tracking-wide uppercase transition-all duration-200 flex items-center justify-center
      ${e?"border-gray-200 text-gray-400 cursor-not-allowed bg-gray-50":"border-gray-300  hover:border-defined-green hover:text-defined-green hover:bg-green-50"}`,onClick:()=>y(a),disabled:e,children:"MOVE TO WISHLIST"}),(0,b.jsx)("button",{onClick:()=>x(a),className:`h-[40px]   text-[13px]  font-medium tracking-wide uppercase transition-all duration-200 flex items-center justify-center
      ${e?"border-gray-200 text-red-300":"border-gray-300  hover:border-red-500 hover:text-red-600 hover:bg-red-50"}`,children:"Remove"})]})]})]},`${a.productId._id}-${a.variantId?._id??"no-variant"}`)})})]}),(0,b.jsx)("div",{className:"self-start w-full lg:w-[40%]",children:F.length>0&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md p-4 h-fit sticky top-24",children:[(0,b.jsx)("h3",{className:"font-semibold border-b  border-gray-200 pb-2",children:"PRICE DETAILS"}),(0,b.jsxs)("div",{className:"text-sm space-y-3 mt-3 ",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("span",{children:["Price (",D," available items)"]}),(0,b.jsxs)("span",{children:[(0,b.jsx)(l.FaRupeeSign,{className:"inline"}),A.toFixed(0)]})]}),(0,b.jsxs)("div",{className:"flex justify-between border-b border-gray-200 pb-3",children:[(0,b.jsx)("span",{children:"Discount"}),(0,b.jsxs)("span",{className:"text-define-red",children:["-",(0,b.jsx)(l.FaRupeeSign,{className:"inline"}),B.toFixed(0)]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,b.jsx)("span",{children:"Total Amount"}),(0,b.jsxs)("span",{children:[(0,b.jsx)(l.FaRupeeSign,{className:"inline"}),C.toFixed(0)]})]})]}),(0,b.jsx)("button",{onClick:()=>{if(0===z.length)return void k.default.error("No available items in cart");let b=encodeURIComponent(JSON.stringify(z.map(a=>({productId:a.productId._id,variantId:a.variantId?._id,quantity:a.quantity,priceAtTime:a.priceAtTime}))));a.push(`/checkout?mode=cart&items=${b}`)},disabled:0===z.length,className:`mt-6 w-full rounded-full py-2 h-12 text-sm font-semibold transition-all ${0===z.length?"bg-gray-300 text-gray-500 cursor-not-allowed":"btn-grad  hover:scale-[1.03] text-white"}`,children:0===z.length?"No Available Items":`Proceed To Checkout (${D} items)`}),E&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-2 text-center",children:"Out of stock items excluded from checkout"})]})})]})}])},36549,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(71987),f=a.i(39154),g=a.i(38246),h=a.i(46086),i=a.i(42814),j=a.i(5176),k=a.i(7414),l=a.i(57374),m=a.i(96790);function n({route:a}){return"/my-orders"===a?(0,b.jsx)(l.default,{}):"/my-wishlist"===a?(0,b.jsx)(m.default,{}):"/my-account"===a?(0,b.jsx)(i.default,{}):"/manage-address"===a?(0,b.jsx)(k.default,{}):"/my-cart"===a?(0,b.jsx)(j.default,{}):null}a.s(["default",0,()=>{let{customer:a}=(0,h.useCustomer)(),i=(0,d.usePathname)(),j=[{title:"Account Settings",key:"account",links:[{href:"/my-account",label:"My Account"},{href:"/manage-address",label:"Manage Address"}]},{title:"Your Orders",key:"orders",links:[{href:"/my-orders",label:"My Orders"},{href:"/my-wishlist",label:"My Wishlist"},{href:"/my-cart",label:"My Cart"},{href:"/my-reviews",label:"My Reviews"}]}],[k,l]=(0,c.useState)({account:!0,orders:!0,payments:!0}),[m,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=()=>o(window.innerWidth<768);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,c.useEffect)(()=>{let a=null;j.forEach(b=>{b.links.some(a=>i.startsWith(a.href))&&(a=b.key)}),m?(q(i),l({account:"account"===a,orders:"orders"===a,payments:"payments"===a})):l({account:!0,orders:!0,payments:!0})},[i,m]);let r=a=>{let b=m?p===a:i===a;return`px-4 py-2 text-sm rounded-md cursor-pointer transition flex items-center
    ${b?"bg-define-pink text-define-brown font-semibold":"hover:bg-pink-50 text-gray-500"}`},s=m&&p;return(0,b.jsx)("div",{className:"w-full flex flex-col",children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"px-4 py-2 bg-define-pink text-define-brown font-semibold rounded-md",children:j.flatMap(a=>a.links).find(a=>a.href===p)?.label}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-md mt-3",children:(0,b.jsx)(n,{route:p})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-define-brown text-white p-4 flex items-center gap-3 shadow rounded-md",children:[(0,b.jsx)("div",{className:"size-10 rounded-full overflow-hidden bg-white",children:(0,b.jsx)(e.default,{src:"/images/profile.png",alt:"profile",width:100,height:100,className:"object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs opacity-90",children:"Good Morning"}),(0,b.jsx)("p",{className:"font-medium leading-tight",children:a?.name})]})]}),j.map(a=>(0,b.jsxs)("div",{className:"rounded overflow-hidden",children:[(0,b.jsxs)("div",{onClick:()=>l(b=>({...b,[a.key]:!b[a.key]})),className:"w-full flex justify-between items-center px-4 py-3 bg-define-pink text-define-brown font-semibold",children:[a.title,(0,b.jsx)(f.BiChevronDown,{size:16,className:`transition-transform duration-300 ${k[a.key]?"rotate-180":""}`})]}),k[a.key]&&(0,b.jsx)("ul",{className:"bg-white text-gray-600 flex flex-col gap-1 p-2",children:a.links.map(a=>(0,b.jsx)("li",{children:m?(0,b.jsx)("div",{onClick:()=>q(a.href),className:r(a.href),children:a.label}):(0,b.jsx)(g.default,{href:a.href,className:r(a.href),children:a.label})},a.href))})]},a.key))]})})}],36549)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1898d488._.js.map