module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},22952,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(6704),f=a.i(31173);function g({review:a,onClose:g,onUpdate:h}){let[i,j]=(0,c.useState)(a.rating),[k,l]=(0,c.useState)(0),[m,n]=(0,c.useState)(a.title),[o,p]=(0,c.useState)(a.description),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(a.supporting_files.map(a=>({...a,name:a.url.split("/").pop()||"",type:y(a.url)}))),[u,v]=(0,c.useState)(!1),w=(0,c.useRef)(null),x=(0,d.useRouter)();function y(a){let b=a.split(".").pop()?.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(b||"")?"image/*":["mp4","webm","ogg","mov","avi"].includes(b||"")?"video/*":"application/octet-stream"}let z=a=>{let b=("type"in a,a.type);return b?.startsWith("image/")?"ðŸ–¼ï¸":b?.startsWith("video/")?"ðŸŽ¬":"ðŸ“„"},A=a=>"name"in a?a.name:a.name||"file",B=async b=>{if(b.preventDefault(),!m.trim()||!o.trim()||0===i)return void e.default.error("Please fill in all required fields and provide a rating");v(!0);try{let b=new FormData;if(b.append("title",m),b.append("description",o),b.append("rating",i.toString()),q.forEach(a=>{b.append("images",a)}),s.length>0){let a=s.map(a=>({url:a.url,public_id:a.public_id}));b.append("images",JSON.stringify(a))}let c=await fetch(`https://api.ganpatirudraakshaam.com/api/review/${a._id}`,{method:"PUT",body:b});if(!c.ok)throw Error(`Failed to update review: ${c.statusText}`);let d=await c.json();e.default.success("Review updated successfully!"),h&&h(d),g&&g(),q.forEach(a=>{a.preview&&URL.revokeObjectURL(a.preview)}),x.push("/my-reviews")}catch(a){console.error("Error updating review:",a),e.default.error(a.message||"Failed to update review. Please try again.")}finally{v(!1)}};return(0,c.useEffect)(()=>()=>{q.forEach(a=>{a.preview&&URL.revokeObjectURL(a.preview)})},[]),(0,c.useEffect)(()=>{j(a.rating),n(a.title),p(a.description),t(a.supporting_files.map(a=>({...a,name:a.url.split("/").pop()||"",type:y(a.url)}))),r([])},[a]),(0,b.jsxs)("form",{className:"max-w-225 mx-auto bg-white px-4 rounded-md shadow-sm py-8 md:my-6",onSubmit:B,children:[(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("p",{className:"font-medium mb-2",children:"Rate this product"}),(0,b.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>j(a),onMouseEnter:()=>l(a),onMouseLeave:()=>l(0),children:(0,b.jsx)(f.IoMdStar,{size:28,className:`${a<=(k||i)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},a))})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Review title *"}),(0,b.jsx)("input",{type:"text",placeholder:"Eg: Very good product",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:a=>n(a.target.value),value:m,required:!0})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Your review *"}),(0,b.jsx)("textarea",{rows:4,value:o,onChange:a=>p(a.target.value),placeholder:"Share details of your experience",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),s.length>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"Current Files"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Remove files you want to delete from the review"}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:s.map(a=>(0,b.jsxs)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden bg-gray-50 hover:bg-gray-100 transition-all",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.public_id,void t(a=>a.filter(a=>a.public_id!==b))},className:"absolute top-1 right-1 z-10 w-6 h-6 text-red-500 rounded-full flex items-center justify-center text-xs hover:text-red-600 transition-colors","aria-label":`Remove ${A(a)}`,children:(0,b.jsx)(f.IoMdClose,{})}),(0,b.jsx)("div",{className:"aspect-square flex items-center justify-center",children:a.type?.startsWith("image/")?(0,b.jsx)("img",{src:a.url,alt:A(a),className:"w-full h-full object-cover"}):a.type?.startsWith("video/")?(0,b.jsx)("div",{className:"relative w-full h-full",children:(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-3xl",children:"ðŸŽ¬"})})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,b.jsx)("span",{className:"text-2xl mb-2",children:z(a)}),(0,b.jsx)("span",{className:"text-xs text-center break-words px-2",children:A(a)})]})})]},`existing-${a.public_id}`))})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"Add More Files (optional)"}),(0,b.jsxs)("label",{className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded cursor-pointer text-sm hover:bg-gray-50",children:[(0,b.jsx)("input",{type:"file",ref:w,multiple:!0,hidden:!0,accept:"image/*,video/*",onChange:a=>{let b=a.target.files;if(!b)return;let c=Array.from(b).map(a=>((a.type.startsWith("image/")||a.type.startsWith("video/"))&&(a.preview=URL.createObjectURL(a)),a));r(a=>[...a,...c]),w.current&&(w.current.value="")}}),"ðŸ“· Upload Photos / Videos"]}),q.length>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("p",{className:"text-sm font-medium mb-1",children:["New Files to Upload (",q.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:q.map((a,c)=>(0,b.jsx)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden bg-gray-50 hover:bg-gray-100 transition-all",children:(0,b.jsx)("div",{className:"aspect-square flex items-center justify-center",children:a.type.startsWith("image/")&&a.preview?(0,b.jsx)("img",{src:a.preview,alt:a.name,className:"w-full h-full object-cover"}):a.type.startsWith("video/")&&a.preview?(0,b.jsxs)("div",{className:"relative w-full h-full",children:[(0,b.jsx)("video",{src:a.preview,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-3xl",children:"ðŸŽ¬"})})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-4",children:[(0,b.jsx)("span",{className:"text-2xl mb-2",children:z(a)}),(0,b.jsx)("span",{className:"text-xs text-center break-words px-2",children:a.name})]})})},`new-${a.name}-${c}`))})]})]}),(0,b.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-end",children:[g&&(0,b.jsx)("button",{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded text-sm font-medium hover:bg-gray-50 transition-colors",disabled:u,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:u,className:`
             mt-3 sm:mt-auto flex items-center justify-center gap-2
              text-white font-semibold
              text-xs sm:text-sm md:text-[15px]
              px-3 py-1.5 sm:px-4 sm:py-2 md:px-5
              rounded-full
              bg-linear-to-r
              shadow-md shadow-green-500/30
              transition-all duration-300
              hover:from-emerald-600 hover:to-green-500
              hover:shadow-lg hover:scale-[1.03]
              active:scale-95
              w-full sm:w-fit
            ${u?"from-emerald-600 hover:to-green-500 cursor-not-allowed":"from-green-500 to-emerald-600"}
          `,children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):"Update Review"})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c8603ea1._.js.map