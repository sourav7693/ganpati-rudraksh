module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56508,a=>{"use strict";a.s(["allowOnlyNumbers",0,a=>{let b=a.key;"Backspace"!==b&&"Delete"!==b&&"ArrowLeft"!==b&&"ArrowRight"!==b&&"Tab"!==b&&(/^[0-9]$/.test(b)||a.preventDefault())},"blockNumbersInText",0,a=>{let b=a.key;"Backspace"!==b&&"Delete"!==b&&"ArrowLeft"!==b&&"ArrowRight"!==b&&"Tab"!==b&&/^[0-9]$/.test(b)&&a.preventDefault()}])},9503,a=>{"use strict";var b=a.i(87924),c=a.i(98665),d=a.i(46086),e=a.i(56508),f=a.i(71987),g=a.i(50944),h=a.i(72131),i=a.i(6704);function j(){let{refreshCustomer:a,clearCustomer:j,logoutCustomer:k}=(0,d.useCustomer)(),[l,m]=(0,h.useState)(0),n=(0,g.useSearchParams)(),o=n.get("mode"),p=n.get("mobile"),q="update-mobile"===o,r=(0,g.useRouter)(),[s,t]=(0,h.useState)("login"),[u,v]=(0,h.useState)("MOBILE"),[w,x]=(0,h.useState)(""),[y,z]=(0,h.useState)(""),[A,B]=(0,h.useState)(!1);(0,h.useEffect)(()=>{let a=localStorage.getItem("otpCooldownUntil");if(a){let b=Math.floor((Number(a)-Date.now())/1e3);b>0?m(b):localStorage.removeItem("otpCooldownUntil")}},[]),(0,h.useEffect)(()=>{if(l<=0)return;let a=setInterval(()=>{m(a=>a<=1?(localStorage.removeItem("otpCooldownUntil"),0):a-1)},1e3);return()=>clearInterval(a)},[l]),(0,h.useEffect)(()=>{p&&(x(p.replace("91","")),t("login"))},[p]);let C=a=>{let b=Math.floor(a/60);return`${b}:${(a%60).toString().padStart(2,"0")}`},D=async()=>{if(!A){if(10!==w.length)return void i.default.error("Enter valid 10-digit mobile number");if(!(l>0))try{B(!0);let a=await (0,c.sendOtp)(w);if(console.log(a),a.success){i.default.success(a.message||"OTP sent successfully!"),v("OTP");let b=Date.now()+6e5;localStorage.setItem("otpCooldownUntil",String(b)),m(600)}}catch(a){i.default.error(a.message||"Failed to send OTP")}finally{B(!1)}}},E=async b=>{if(!A){if(6!==y.length)return void i.default.error("Enter valid 6-digit OTP");try{B(!0);let d=b?await (0,c.verifyOtpUpdateMobile)(w,y,"update-mobile"):await (0,c.verifyOtp)(w,y);if(d.success){if(await a(),localStorage.removeItem("otpCooldownUntil"),m(0),x(""),z(""),v("MOBILE"),d.forceLogout){i.default.success(d.message||"Number updated. Please login again."),j(),r.replace("/login");return}i.default.success("Login successful!"),r.replace("/")}}catch(a){i.default.error(a.message||"OTP verification failed")}finally{B(!1)}}};return(0,b.jsx)("div",{className:"w-full bg-[#f5f5f5] py-10 px-4",children:(0,b.jsxs)("div",{className:"max-w-200  mx-auto bg-white rounded-md overflow-hidden flex shadow-sm",children:[(0,b.jsxs)("div",{className:"hidden md:flex relative bg-linear-to-b gap-2 from-[#5a1d0c] to-[#8a3a28] text-white p-8 md:p-10 flex-col justify-between",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold leading-snug",children:["Looks like you're a",(0,b.jsx)("br",{}),"member!"]}),(0,b.jsx)("div",{className:"mt-8 md:mt-0 flex justify-center",children:(0,b.jsx)(f.default,{src:"/images/login.png",alt:"Login Illustration",width:280,height:280,className:"object-contain"})})]}),(0,b.jsx)("div",{className:"p-8 md:p-10",children:"MOBILE"===u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:q?"Verify Mobile Number":"login"===s?"Enter Login Details":"Enter Signup Details"}),(0,b.jsx)("input",{type:"tel",maxLength:10,placeholder:"Enter Mob No.",value:w,onChange:a=>x(a.target.value.replace(/\D/g,"")),onKeyDown:e.allowOnlyNumbers,className:"w-full border text-define-brown border-gray-300 rounded-sm px-4 py-3 text-sm outline-none focus:border-define-brown"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-4 leading-relaxed",children:["By continuing, you agree to"," ",(0,b.jsx)("span",{className:"text-[#5a1d0c] font-medium cursor-pointer",children:"Ganpati Rudraksh"})," ",(0,b.jsx)("span",{className:"underline cursor-pointer",children:"Terms of Use"})," ","and"," ",(0,b.jsx)("span",{className:"underline cursor-pointer",children:"Privacy Policy"}),"."]}),(0,b.jsx)("button",{onClick:D,disabled:A||10!==w.length||l>0,className:"w-full mt-6 bg-[#5a1d0c] hover:bg-[#4a1609] text-white py-3 rounded-sm text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:A?"Sending OTP...":l>0?`Resend in ${C(l)}`:"login"===s?"Request OTP":"Continue"}),"login"===s?(0,b.jsx)("button",{onClick:()=>t("signup"),className:"w-full mt-20 text-[14px] text-define-brown",children:"New to Ganpati Rudraksham? Create an account"}):(0,b.jsx)("button",{onClick:()=>t("login"),className:"w-full mt-4 bg-[#FFBB00] text-black py-3 rounded-sm text-sm font-medium",children:"Existing User? Log In"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enter OTP"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["OTP sent to +91 ",w]}),q&&(0,b.jsx)("p",{className:"text-xs text-red-600 mb-3",children:"You will be logged out after changing your mobile number."}),(0,b.jsx)("input",{type:"tel",maxLength:6,placeholder:"Enter 6-digit OTP",value:y,onKeyDown:e.allowOnlyNumbers,onChange:a=>z(a.target.value.replace(/\D/g,"")),className:"w-full border border-gray-300 rounded-sm px-4 py-3 text-sm outline-none focus:border-[#5a1d0c]"}),(0,b.jsx)("button",{onClick:()=>q?E(!0):E(),disabled:A||6!==y.length,className:"w-full mt-6 bg-[#5a1d0c] hover:bg-[#4a1609] text-white py-3 rounded-sm text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:A?"Verifying...":q?"Verify & Update Number":"Verify & Continue"}),(0,b.jsx)("button",{onClick:()=>{z(""),v("MOBILE"),localStorage.removeItem("otpCooldownUntil"),m(0)},className:"block w-full mt-4 text-sm underline text-gray-600",children:"Change mobile number"}),l>0?(0,b.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-3",children:["Resend OTP in"," ",(0,b.jsx)("span",{className:"font-semibold",children:C(l)})]}):(0,b.jsx)("button",{onClick:D,className:"block w-full mt-3 text-sm underline text-[#5a1d0c]",children:"Resend OTP"})]})})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e15c1752._.js.map